<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1 Step one: read and stack | ActiGraph processing in R</title>
  <meta name="description" content="This book documents the translation of Statistics Canada’s method for ActiGraph data processing from SAS to R." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="1 Step one: read and stack | ActiGraph processing in R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book documents the translation of Statistics Canada’s method for ActiGraph data processing from SAS to R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1 Step one: read and stack | ActiGraph processing in R" />
  
  <meta name="twitter:description" content="This book documents the translation of Statistics Canada’s method for ActiGraph data processing from SAS to R." />
  

<meta name="author" content="Joel Barnes and Michelle Guerrero" />


<meta name="date" content="2023-06-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/viz-1.8.2/viz.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/grViz-binding-1.0.10/grViz.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./index.html">ActiGraph processing in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html"><i class="fa fa-check"></i><b>1</b> Step one: read and stack</a>
<ul>
<li class="chapter" data-level="1.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#r-code-flow"><i class="fa fa-check"></i><b>1.1</b> R code flow</a></li>
<li class="chapter" data-level="1.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#get_agd_data"><i class="fa fa-check"></i><b>1.2</b> get_agd_data()</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#r-documentation"><i class="fa fa-check"></i><b>1.2.1</b> R documentation</a></li>
<li class="chapter" data-level="1.2.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#source-code"><i class="fa fa-check"></i><b>1.2.2</b> Source code</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#get_agd_table"><i class="fa fa-check"></i><b>1.3</b> get_agd_table()</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#r-documentation-1"><i class="fa fa-check"></i><b>1.3.1</b> R documentation</a></li>
<li class="chapter" data-level="1.3.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#source-code-1"><i class="fa fa-check"></i><b>1.3.2</b> Source code</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#apply_statcan_method"><i class="fa fa-check"></i><b>1.4</b> apply_statcan_method()</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#r-documentation-2"><i class="fa fa-check"></i><b>1.4.1</b> R documentation</a></li>
<li class="chapter" data-level="1.4.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#source-code-2"><i class="fa fa-check"></i><b>1.4.2</b> Source code</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#vignette"><i class="fa fa-check"></i><b>1.5</b> Vignette</a></li>
<li class="chapter" data-level="1.6" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#tests"><i class="fa fa-check"></i><b>1.6</b> Tests</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#equality-test-normal-filtered-data"><i class="fa fa-check"></i><b>1.6.1</b> Equality test (normal-filtered data)</a>
<ul>
<li class="chapter" data-level="1.6.1.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#results"><i class="fa fa-check"></i><b>1.6.1.1</b> Results</a></li>
<li class="chapter" data-level="1.6.1.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#interpretation"><i class="fa fa-check"></i><b>1.6.1.2</b> Interpretation</a></li>
</ul></li>
<li class="chapter" data-level="1.6.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#equality-test-lfe-filtered-data"><i class="fa fa-check"></i><b>1.6.2</b> Equality test (LFE-filtered data)</a>
<ul>
<li class="chapter" data-level="1.6.2.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#results-1"><i class="fa fa-check"></i><b>1.6.2.1</b> Results</a></li>
<li class="chapter" data-level="1.6.2.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#interpretation-1"><i class="fa fa-check"></i><b>1.6.2.2</b> Interpretation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#step-one-issues"><i class="fa fa-check"></i><b>1.7</b> Issues</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#trivial-discrepancies"><i class="fa fa-check"></i><b>1.7.1</b> Trivial discrepancies</a>
<ul>
<li class="chapter" data-level="1.7.1.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-mismatches-inclinelying-vector"><i class="fa fa-check"></i><b>1.7.1.1</b> Value mismatches (inclineLying vector)</a></li>
<li class="chapter" data-level="1.7.1.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-mismatches-actigraph-vector"><i class="fa fa-check"></i><b>1.7.1.2</b> Value mismatches (Actigraph vector)</a></li>
</ul></li>
<li class="chapter" data-level="1.7.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#non-trivial-discrepancies"><i class="fa fa-check"></i><b>1.7.2</b> Non-trivial discrepancies</a>
<ul>
<li class="chapter" data-level="1.7.2.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-mismatches-in_date-vector"><i class="fa fa-check"></i><b>1.7.2.1</b> Value mismatches (in_date vector)</a></li>
<li class="chapter" data-level="1.7.2.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-mismatches-in_dayn-vector"><i class="fa fa-check"></i><b>1.7.2.2</b> Value mismatches (in_dayn vector)</a></li>
<li class="chapter" data-level="1.7.2.3" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-mismatches-in_noon-vector"><i class="fa fa-check"></i><b>1.7.2.3</b> Value mismatches (in_noon vector)</a></li>
</ul></li>
<li class="chapter" data-level="1.7.3" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#other"><i class="fa fa-check"></i><b>1.7.3</b> Other</a>
<ul>
<li class="chapter" data-level="1.7.3.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#value-transitions-in_noon-vector"><i class="fa fa-check"></i><b>1.7.3.1</b> Value transitions (in_noon vector)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#fixes"><i class="fa fa-check"></i><b>1.8</b> Fixes</a>
<ul>
<li class="chapter" data-level="1.8.1" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#initialization-times-other-than-midnight"><i class="fa fa-check"></i><b>1.8.1</b> Initialization times other than midnight</a></li>
<li class="chapter" data-level="1.8.2" data-path="step-one-read-and-stack.html"><a href="step-one-read-and-stack.html#transition-times-in_noon-vector"><i class="fa fa-check"></i><b>1.8.2</b> Transition times (in_noon vector)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ActiGraph processing in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="step-one-read-and-stack" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">1</span> Step one: read and stack<a href="step-one-read-and-stack.html#step-one-read-and-stack" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this first step (hereafter, <i>Step one</i>), the codes iterates a list of paths to <a href="https://theactigraph.com" target="_blank">ActiGraph</a> data files and performs three general tasks:</p>
<ul>
<li>imports the data (SAS: from <code>.csv</code> files; R: from <code>.agd</code> files)</li>
<li>applies preliminary data processing to the data<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></li>
<li>binds the data to a single file (SAS: <code>paxraw.sas7bdat</code>; R: <code>paxraw.rds</code><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>) which, by the end of iteration, contains all participant data.</li>
</ul>
<p>Of note, an <code>.agd</code> file contains a complete SQL database (e.g., tables, indices, data). As such, many different types of data can be stored and retrieved from an <code>.agd</code> file. The following tables are included in an <code>.agd</code> file:</p>
<ul>
<li>settings</li>
<li>data<br />
</li>
<li>sleep</li>
<li>awakenings<br />
</li>
<li>filters</li>
<li>crouterEpoch</li>
<li>crouterMinute</li>
<li>logDiaryTimes<br />
</li>
<li>sqlite_sequence</li>
<li>capsense<br />
</li>
<li>proximity</li>
</ul>
<p>The R code tentatively makes use of the <code>settings</code> and <code>data</code> tables when processing <code>.agd</code> files. Snapshots of these tables appear below.</p>
<p><br></p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-2">Table 1.1: </span>Output from the settings table of an .agd file.
</caption>
<thead>
<tr>
<th style="text-align:right;">
settingID
</th>
<th style="text-align:left;">
settingName
</th>
<th style="text-align:left;">
settingValue
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
softwarename
</td>
<td style="text-align:left;">
ActiLife
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
softwareversion
</td>
<td style="text-align:left;">
6.13.4
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
osversion
</td>
<td style="text-align:left;">
Microsoft Windows NT 6.1.7601 Service Pack 1
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
machinename
</td>
<td style="text-align:left;">
C196337
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
datetimeformat
</td>
<td style="text-align:left;">
dd/MM/yyyy
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
decimal
</td>
<td style="text-align:left;">
.
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:left;">
grouping
</td>
<td style="text-align:left;">
,
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:left;">
culturename
</td>
<td style="text-align:left;">
English (Canada)
</td>
</tr>
<tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
finished
</td>
<td style="text-align:left;">
true
</td>
</tr>
<tr>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
devicename
</td>
<td style="text-align:left;">
wGT3XBT
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:left;">
filter
</td>
<td style="text-align:left;">
Normal
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:left;">
deviceserial
</td>
<td style="text-align:left;">
MOS2E23200676
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:left;">
deviceversion
</td>
<td style="text-align:left;">
1.9.2
</td>
</tr>
<tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:left;">
modenumber
</td>
<td style="text-align:left;">
61
</td>
</tr>
<tr>
<td style="text-align:right;">
15
</td>
<td style="text-align:left;">
epochlength
</td>
<td style="text-align:left;">
15
</td>
</tr>
<tr>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
startdatetime
</td>
<td style="text-align:left;">
637576704000000000
</td>
</tr>
<tr>
<td style="text-align:right;">
17
</td>
<td style="text-align:left;">
stopdatetime
</td>
<td style="text-align:left;">
637595266420000000
</td>
</tr>
<tr>
<td style="text-align:right;">
18
</td>
<td style="text-align:left;">
downloaddatetime
</td>
<td style="text-align:left;">
637595266420000000
</td>
</tr>
<tr>
<td style="text-align:right;">
19
</td>
<td style="text-align:left;">
batteryvoltage
</td>
<td style="text-align:left;">
3.69
</td>
</tr>
<tr>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
original sample rate
</td>
<td style="text-align:left;">
30
</td>
</tr>
<tr>
<td style="text-align:right;">
21
</td>
<td style="text-align:left;">
proximityIntervalInSeconds
</td>
<td style="text-align:left;">
60
</td>
</tr>
<tr>
<td style="text-align:right;">
22
</td>
<td style="text-align:left;">
subjectname
</td>
<td style="text-align:left;">
MOS2E23200676_A
</td>
</tr>
<tr>
<td style="text-align:right;">
23
</td>
<td style="text-align:left;">
sex
</td>
<td style="text-align:left;">
Undefined
</td>
</tr>
<tr>
<td style="text-align:right;">
24
</td>
<td style="text-align:left;">
height
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
25
</td>
<td style="text-align:left;">
mass
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
26
</td>
<td style="text-align:left;">
age
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
27
</td>
<td style="text-align:left;">
dateOfBirth
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
28
</td>
<td style="text-align:left;">
unexpectedResets
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
29
</td>
<td style="text-align:left;">
epochcount
</td>
<td style="text-align:left;">
123749
</td>
</tr>
</tbody>
</table>
<p><br></p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-3">Table 1.2: </span>Output from the data table of an .agd file.
</caption>
<thead>
<tr>
<th style="text-align:left;">
dataTimestamp
</th>
<th style="text-align:right;">
axis1
</th>
<th style="text-align:right;">
axis2
</th>
<th style="text-align:right;">
axis3
</th>
<th style="text-align:right;">
steps
</th>
<th style="text-align:right;">
lux
</th>
<th style="text-align:right;">
inclineOff
</th>
<th style="text-align:right;">
inclineStanding
</th>
<th style="text-align:right;">
inclineSitting
</th>
<th style="text-align:right;">
inclineLying
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2021-05-27 00:00:00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:00:15
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:right;">
18
</td>
<td style="text-align:right;">
190
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:00:30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
42
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:00:45
</td>
<td style="text-align:right;">
111
</td>
<td style="text-align:right;">
114
</td>
<td style="text-align:right;">
129
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:01:00
</td>
<td style="text-align:right;">
431
</td>
<td style="text-align:right;">
361
</td>
<td style="text-align:right;">
579
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:01:15
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
227
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:01:30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:01:45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:02:00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:02:15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:02:30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:02:45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:03:00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:03:15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:03:30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:03:45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:04:00
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:04:15
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:04:30
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-05-27 00:04:45
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
15
</td>
</tr>
</tbody>
</table>
<div id="r-code-flow" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> R code flow<a href="step-one-read-and-stack.html#r-code-flow" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The general flow of the R code in <i>Step one</i> is illustrated in Figure 1 below.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-4"></span>
<div id="htmlwidget-9865101073323f12a3b0" style="width:672px;height:480px;" class="grViz html-widget"></div>
<script type="application/json" data-for="htmlwidget-9865101073323f12a3b0">{"x":{"diagram":"\n\n  digraph G {\n      \n    graph[\n      layout = dot\n      compound = true\n      rankdir = LR\n      label = \"Step one: read and stack\"\n      penwidth = 0\n      fontname = Arial\n    ]\n      \n    node[\n      shape = circle\n      style = filled\n      fillcolor = \"#edf6f9\"\n      height = 1\n      width = 1\n      fontname = Arial\n      fontsize = 11\n      fixedsize = true\n    ]\n    \n    edge[\n      style = invis\n      arrowhead = vee\n    ]\n  \n    subgraph cluster1 {\n    \n      graph[\n        label = \"\"\n      ]\n      \n      node1[\n        label = < <b>.agd<br/>file paths<\/b> >\n        fillcolor = \"#006d77\"\n        fontcolor = white\n      ]\n      \n    }\n    \n    subgraph cluster2 {\n    \n      graph[\n        label = \"\"\n        style = solid\n        penwidth = 1\n      ]\n  \n      subgraph cluster2a {\n      \n        graph[\n          penwidth = 0\n        ]\n          \n        node2[\n          label = < <b>get_agd_<br/>data()<\/b> >\n        ]\n            \n      }\n      \n      subgraph cluster2b {\n        \n        graph[\n          penwidth = 1\n          style = dotted\n          label = \"Iteration (in serial or parallel)\"\n        ]\n        \n        node3[\n          label = < <b>.agd<br/>file path<\/b> >\n          fillcolor = \"#006d77\"\n          fontcolor = white\n        ]\n        \n        node4[\n          label = < <b>get_agd_<br/>table()<\/b> >\n          fontsize = 10\n        ]\n        \n        node5[\n          label = < <b>apply_statcan_<br/>method()<\/b> >\n          fontsize = 9\n        ]\n        \n        node3 -> node4[\n          style = vis\n        ]\n        \n        node4 -> node5[\n          style = vis\n        ]\n        \n        node5 -> node3[\n          style = vis\n          xlabel = \"[1..N]\"\n          fontsize = 12\n        ]\n        \n      }\n      \n      node2 -> node3[\n        lhead = cluster2b\n        style = vis\n      ]\n        \n    }\n    \n    subgraph cluster3 {\n    \n      graph[\n        label = \"\"\n      ]\n      \n      node6[\n        label = < <b>paxraw<br/>file<\/b> > \n        fillcolor = \"#e29578\"\n        fontcolor = white\n      ]\n    }\n    \n    node1 -> node2[\n      style = vis\n      lhead = cluster2\n    ]\n    \n    node5 -> node6[\n      style = vis\n      ltail = cluster2\n    ]\n    \n    subgraph cluster4 {\n    \n      graph[\n        label = \"\"\n      ]\n      \n      node[\n        height = 0.25\n        width = 0.25\n      ]\n    \n      node7[\n        label = \"\"\n        fillcolor = white\n        fontcolor = white\n        penwidth = 0\n      ]\n      \n      node8[\n        label = \"\"\n        fillcolor = white\n        fontcolor = white\n        penwidth = 0\n      ]\n      \n      node9[\n        label = \"\"\n        fillcolor = white\n        fontcolor = white\n        penwidth = 0\n      ]\n      \n      node7 -> node8 -> node9\n    \n    }\n    \n    subgraph cluster5 {\n    \n      graph[\n        label = \"Legend\"\n        labeljust = l\n      ]\n      \n      node[\n        shape = circle\n        height = 1\n        width = 1\n      ]\n    \n      node10[\n        label = Input\n        fillcolor = \"#006d77\"\n        fontcolor = white\n      ]\n      \n      node11[\n        label = < Function<br/>call >\n      ]\n      \n      node12[\n        label = Output\n        fillcolor = \"#e29578\"\n        fontcolor = white\n      ]\n      \n      node10 -> node11 -> node12\n    \n    }\n  \n  }\n      \n","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script>
<p class="caption">
Figure 1.1: The sequence of inputs, function calls and outputs in the R code during step one of the Statistics Canada method for ActiGraph data processing.
</p>
</div>
</div>
<div id="get_agd_data" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> get_agd_data()<a href="step-one-read-and-stack.html#get_agd_data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="r-documentation" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> R documentation<a href="step-one-read-and-stack.html#r-documentation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="img/get-agd-data.png" width="100%" /></p>
</div>
<div id="source-code" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> Source code<a href="step-one-read-and-stack.html#source-code" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb1-1"><a href="step-one-read-and-stack.html#cb1-1"></a>get_agd_data <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">file_path =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb1-2"><a href="step-one-read-and-stack.html#cb1-2"></a></span>
<span id="cb1-3"><a href="step-one-read-and-stack.html#cb1-3"></a>  <span class="co"># Throw error message if any file_path values do not exist</span></span>
<span id="cb1-4"><a href="step-one-read-and-stack.html#cb1-4"></a>  <span class="cf">if</span>(<span class="fu">sum</span>(<span class="fu">file.exists</span>(file_path)) <span class="sc">!=</span> <span class="fu">length</span>(file_path)) {</span>
<span id="cb1-5"><a href="step-one-read-and-stack.html#cb1-5"></a></span>
<span id="cb1-6"><a href="step-one-read-and-stack.html#cb1-6"></a>    <span class="fu">stop</span>(</span>
<span id="cb1-7"><a href="step-one-read-and-stack.html#cb1-7"></a>      <span class="fu">paste0</span>(</span>
<span id="cb1-8"><a href="step-one-read-and-stack.html#cb1-8"></a>        <span class="st">&quot;[actigraphr error message]: the following file(s) do not exist in the `file_path` parameter: &quot;</span>,</span>
<span id="cb1-9"><a href="step-one-read-and-stack.html#cb1-9"></a>        <span class="fu">paste0</span>(file_path[<span class="fu">which</span>(<span class="sc">!</span> <span class="fu">file.exists</span>(file_path))], <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>),</span>
<span id="cb1-10"><a href="step-one-read-and-stack.html#cb1-10"></a>        <span class="st">&quot;.&quot;</span></span>
<span id="cb1-11"><a href="step-one-read-and-stack.html#cb1-11"></a>      )</span>
<span id="cb1-12"><a href="step-one-read-and-stack.html#cb1-12"></a>    )</span>
<span id="cb1-13"><a href="step-one-read-and-stack.html#cb1-13"></a></span>
<span id="cb1-14"><a href="step-one-read-and-stack.html#cb1-14"></a>  }</span>
<span id="cb1-15"><a href="step-one-read-and-stack.html#cb1-15"></a></span>
<span id="cb1-16"><a href="step-one-read-and-stack.html#cb1-16"></a>  <span class="co"># Get ellipsis arguments</span></span>
<span id="cb1-17"><a href="step-one-read-and-stack.html#cb1-17"></a>  ellipsis_arguments <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb1-18"><a href="step-one-read-and-stack.html#cb1-18"></a></span>
<span id="cb1-19"><a href="step-one-read-and-stack.html#cb1-19"></a>  <span class="co"># Check if method parameter is set to &quot;statcan&quot;</span></span>
<span id="cb1-20"><a href="step-one-read-and-stack.html#cb1-20"></a>  <span class="cf">if</span>(<span class="st">&quot;statcan&quot;</span> <span class="sc">%in%</span> ellipsis_arguments<span class="sc">$</span>method) {</span>
<span id="cb1-21"><a href="step-one-read-and-stack.html#cb1-21"></a></span>
<span id="cb1-22"><a href="step-one-read-and-stack.html#cb1-22"></a>    <span class="co"># Check if cpu_cores parameter is greater than one and if the file_path parameter contains more than one path</span></span>
<span id="cb1-23"><a href="step-one-read-and-stack.html#cb1-23"></a>    <span class="co"># If so, apply parallel processing</span></span>
<span id="cb1-24"><a href="step-one-read-and-stack.html#cb1-24"></a>    <span class="cf">if</span>(<span class="fu">isTRUE</span>(<span class="fu">class</span>(ellipsis_arguments<span class="sc">$</span>cpu_cores) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>) <span class="sc">&amp;</span> ellipsis_arguments<span class="sc">$</span>cpu_cores <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="fu">length</span>(file_path) <span class="sc">&gt;</span> <span class="dv">1</span>)) {</span>
<span id="cb1-25"><a href="step-one-read-and-stack.html#cb1-25"></a></span>
<span id="cb1-26"><a href="step-one-read-and-stack.html#cb1-26"></a>      <span class="co"># Create a cluster</span></span>
<span id="cb1-27"><a href="step-one-read-and-stack.html#cb1-27"></a>      cluster <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(ellipsis_arguments<span class="sc">$</span>cpu_cores)</span>
<span id="cb1-28"><a href="step-one-read-and-stack.html#cb1-28"></a></span>
<span id="cb1-29"><a href="step-one-read-and-stack.html#cb1-29"></a>      <span class="co"># Make objects available to nodes in cluster</span></span>
<span id="cb1-30"><a href="step-one-read-and-stack.html#cb1-30"></a>      parallel<span class="sc">::</span><span class="fu">clusterExport</span>(</span>
<span id="cb1-31"><a href="step-one-read-and-stack.html#cb1-31"></a>        <span class="at">cl =</span> cluster,</span>
<span id="cb1-32"><a href="step-one-read-and-stack.html#cb1-32"></a>        <span class="at">varlist =</span> <span class="fu">list</span>(<span class="st">&quot;ellipsis_arguments&quot;</span>, <span class="st">&quot;file_path&quot;</span>),</span>
<span id="cb1-33"><a href="step-one-read-and-stack.html#cb1-33"></a>        <span class="at">envir =</span> <span class="fu">environment</span>()</span>
<span id="cb1-34"><a href="step-one-read-and-stack.html#cb1-34"></a>      )</span>
<span id="cb1-35"><a href="step-one-read-and-stack.html#cb1-35"></a></span>
<span id="cb1-36"><a href="step-one-read-and-stack.html#cb1-36"></a>      <span class="co"># Make packages and functions available to nodes in cluster</span></span>
<span id="cb1-37"><a href="step-one-read-and-stack.html#cb1-37"></a>      <span class="fu">invisible</span>(</span>
<span id="cb1-38"><a href="step-one-read-and-stack.html#cb1-38"></a>        parallel<span class="sc">::</span><span class="fu">clusterEvalQ</span>(</span>
<span id="cb1-39"><a href="step-one-read-and-stack.html#cb1-39"></a>          <span class="at">cl =</span> cluster,</span>
<span id="cb1-40"><a href="step-one-read-and-stack.html#cb1-40"></a>          <span class="at">expr =</span> {</span>
<span id="cb1-41"><a href="step-one-read-and-stack.html#cb1-41"></a></span>
<span id="cb1-42"><a href="step-one-read-and-stack.html#cb1-42"></a>            <span class="co"># Import dependencies</span></span>
<span id="cb1-43"><a href="step-one-read-and-stack.html#cb1-43"></a>            dependencies <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-44"><a href="step-one-read-and-stack.html#cb1-44"></a>              <span class="st">&quot;actigraphr&quot;</span>,</span>
<span id="cb1-45"><a href="step-one-read-and-stack.html#cb1-45"></a>              <span class="st">&quot;DBI&quot;</span>,</span>
<span id="cb1-46"><a href="step-one-read-and-stack.html#cb1-46"></a>              <span class="st">&quot;dplyr&quot;</span>,</span>
<span id="cb1-47"><a href="step-one-read-and-stack.html#cb1-47"></a>              <span class="st">&quot;magrittr&quot;</span>,</span>
<span id="cb1-48"><a href="step-one-read-and-stack.html#cb1-48"></a>              <span class="st">&quot;RSQLite&quot;</span>,</span>
<span id="cb1-49"><a href="step-one-read-and-stack.html#cb1-49"></a>              <span class="st">&quot;stats&quot;</span>,</span>
<span id="cb1-50"><a href="step-one-read-and-stack.html#cb1-50"></a>              <span class="st">&quot;stringr&quot;</span></span>
<span id="cb1-51"><a href="step-one-read-and-stack.html#cb1-51"></a>            )</span>
<span id="cb1-52"><a href="step-one-read-and-stack.html#cb1-52"></a></span>
<span id="cb1-53"><a href="step-one-read-and-stack.html#cb1-53"></a>            import <span class="ot">&lt;-</span> <span class="fu">lapply</span>(dependencies, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-54"><a href="step-one-read-and-stack.html#cb1-54"></a></span>
<span id="cb1-55"><a href="step-one-read-and-stack.html#cb1-55"></a>          }</span>
<span id="cb1-56"><a href="step-one-read-and-stack.html#cb1-56"></a>        )</span>
<span id="cb1-57"><a href="step-one-read-and-stack.html#cb1-57"></a>      )</span>
<span id="cb1-58"><a href="step-one-read-and-stack.html#cb1-58"></a></span>
<span id="cb1-59"><a href="step-one-read-and-stack.html#cb1-59"></a>      <span class="co"># Iterate file_path parameter</span></span>
<span id="cb1-60"><a href="step-one-read-and-stack.html#cb1-60"></a>      <span class="fu">tryCatch</span>(</span>
<span id="cb1-61"><a href="step-one-read-and-stack.html#cb1-61"></a>        <span class="at">expr =</span> {</span>
<span id="cb1-62"><a href="step-one-read-and-stack.html#cb1-62"></a></span>
<span id="cb1-63"><a href="step-one-read-and-stack.html#cb1-63"></a>          output <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb1-64"><a href="step-one-read-and-stack.html#cb1-64"></a>            pbapply<span class="sc">::</span><span class="fu">pblapply</span>(</span>
<span id="cb1-65"><a href="step-one-read-and-stack.html#cb1-65"></a>              <span class="at">cl =</span> cluster,</span>
<span id="cb1-66"><a href="step-one-read-and-stack.html#cb1-66"></a>              <span class="at">X =</span> file_path,</span>
<span id="cb1-67"><a href="step-one-read-and-stack.html#cb1-67"></a>              <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-68"><a href="step-one-read-and-stack.html#cb1-68"></a></span>
<span id="cb1-69"><a href="step-one-read-and-stack.html#cb1-69"></a>                <span class="co"># Return output from apply_statcan_method</span></span>
<span id="cb1-70"><a href="step-one-read-and-stack.html#cb1-70"></a>                <span class="fu">return</span>(</span>
<span id="cb1-71"><a href="step-one-read-and-stack.html#cb1-71"></a>                  <span class="fu">apply_statcan_method</span>(</span>
<span id="cb1-72"><a href="step-one-read-and-stack.html#cb1-72"></a>                    <span class="at">step =</span> ellipsis_arguments<span class="sc">$</span>step,</span>
<span id="cb1-73"><a href="step-one-read-and-stack.html#cb1-73"></a>                    <span class="at">file_path =</span> x</span>
<span id="cb1-74"><a href="step-one-read-and-stack.html#cb1-74"></a>                  )</span>
<span id="cb1-75"><a href="step-one-read-and-stack.html#cb1-75"></a>                )</span>
<span id="cb1-76"><a href="step-one-read-and-stack.html#cb1-76"></a></span>
<span id="cb1-77"><a href="step-one-read-and-stack.html#cb1-77"></a>              }</span>
<span id="cb1-78"><a href="step-one-read-and-stack.html#cb1-78"></a>            )</span>
<span id="cb1-79"><a href="step-one-read-and-stack.html#cb1-79"></a>          )</span>
<span id="cb1-80"><a href="step-one-read-and-stack.html#cb1-80"></a></span>
<span id="cb1-81"><a href="step-one-read-and-stack.html#cb1-81"></a>          <span class="co"># Stop cluster</span></span>
<span id="cb1-82"><a href="step-one-read-and-stack.html#cb1-82"></a>          parallel<span class="sc">::</span><span class="fu">stopCluster</span>(cluster)</span>
<span id="cb1-83"><a href="step-one-read-and-stack.html#cb1-83"></a></span>
<span id="cb1-84"><a href="step-one-read-and-stack.html#cb1-84"></a>        },</span>
<span id="cb1-85"><a href="step-one-read-and-stack.html#cb1-85"></a>        <span class="at">error =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-86"><a href="step-one-read-and-stack.html#cb1-86"></a></span>
<span id="cb1-87"><a href="step-one-read-and-stack.html#cb1-87"></a>          <span class="co"># Stop cluster</span></span>
<span id="cb1-88"><a href="step-one-read-and-stack.html#cb1-88"></a>          parallel<span class="sc">::</span><span class="fu">stopCluster</span>(cluster)</span>
<span id="cb1-89"><a href="step-one-read-and-stack.html#cb1-89"></a></span>
<span id="cb1-90"><a href="step-one-read-and-stack.html#cb1-90"></a>          <span class="co"># Throw error message</span></span>
<span id="cb1-91"><a href="step-one-read-and-stack.html#cb1-91"></a>          <span class="fu">stop</span>(</span>
<span id="cb1-92"><a href="step-one-read-and-stack.html#cb1-92"></a>            <span class="fu">paste0</span>(</span>
<span id="cb1-93"><a href="step-one-read-and-stack.html#cb1-93"></a>              <span class="st">&quot;[actigraphr error message]: there is a problem with the apply_statcan_method function.&quot;</span></span>
<span id="cb1-94"><a href="step-one-read-and-stack.html#cb1-94"></a>            )</span>
<span id="cb1-95"><a href="step-one-read-and-stack.html#cb1-95"></a>          )</span>
<span id="cb1-96"><a href="step-one-read-and-stack.html#cb1-96"></a></span>
<span id="cb1-97"><a href="step-one-read-and-stack.html#cb1-97"></a>        }</span>
<span id="cb1-98"><a href="step-one-read-and-stack.html#cb1-98"></a>      )</span>
<span id="cb1-99"><a href="step-one-read-and-stack.html#cb1-99"></a></span>
<span id="cb1-100"><a href="step-one-read-and-stack.html#cb1-100"></a>      <span class="co"># Add grouping vector for each unique minute</span></span>
<span id="cb1-101"><a href="step-one-read-and-stack.html#cb1-101"></a>      output<span class="sc">$</span>grp <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb1-102"><a href="step-one-read-and-stack.html#cb1-102"></a>        <span class="fu">factor</span>(</span>
<span id="cb1-103"><a href="step-one-read-and-stack.html#cb1-103"></a>          <span class="fu">paste0</span>(</span>
<span id="cb1-104"><a href="step-one-read-and-stack.html#cb1-104"></a>            output<span class="sc">$</span>file_name,</span>
<span id="cb1-105"><a href="step-one-read-and-stack.html#cb1-105"></a>            <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-106"><a href="step-one-read-and-stack.html#cb1-106"></a>            <span class="fu">format</span>(output<span class="sc">$</span>in_date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb1-107"><a href="step-one-read-and-stack.html#cb1-107"></a>            <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-108"><a href="step-one-read-and-stack.html#cb1-108"></a>            stringr<span class="sc">::</span><span class="fu">str_pad</span>(output<span class="sc">$</span>in_hour, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb1-109"><a href="step-one-read-and-stack.html#cb1-109"></a>            <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-110"><a href="step-one-read-and-stack.html#cb1-110"></a>            stringr<span class="sc">::</span><span class="fu">str_pad</span>(output<span class="sc">$</span>in_minute, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb1-111"><a href="step-one-read-and-stack.html#cb1-111"></a>          )</span>
<span id="cb1-112"><a href="step-one-read-and-stack.html#cb1-112"></a>        )</span>
<span id="cb1-113"><a href="step-one-read-and-stack.html#cb1-113"></a>      )</span>
<span id="cb1-114"><a href="step-one-read-and-stack.html#cb1-114"></a></span>
<span id="cb1-115"><a href="step-one-read-and-stack.html#cb1-115"></a>      <span class="co"># Relocate grouping vector</span></span>
<span id="cb1-116"><a href="step-one-read-and-stack.html#cb1-116"></a>      output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb1-117"><a href="step-one-read-and-stack.html#cb1-117"></a>        dplyr<span class="sc">::</span><span class="fu">relocate</span>(grp, <span class="at">.after =</span> obsn)</span>
<span id="cb1-118"><a href="step-one-read-and-stack.html#cb1-118"></a></span>
<span id="cb1-119"><a href="step-one-read-and-stack.html#cb1-119"></a>      <span class="co"># Return output</span></span>
<span id="cb1-120"><a href="step-one-read-and-stack.html#cb1-120"></a>      <span class="fu">return</span>(output)</span>
<span id="cb1-121"><a href="step-one-read-and-stack.html#cb1-121"></a></span>
<span id="cb1-122"><a href="step-one-read-and-stack.html#cb1-122"></a>    }</span>
<span id="cb1-123"><a href="step-one-read-and-stack.html#cb1-123"></a></span>
<span id="cb1-124"><a href="step-one-read-and-stack.html#cb1-124"></a>    <span class="co"># Iterate file_path argument (in serial)</span></span>
<span id="cb1-125"><a href="step-one-read-and-stack.html#cb1-125"></a>    output <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(</span>
<span id="cb1-126"><a href="step-one-read-and-stack.html#cb1-126"></a>      <span class="fu">lapply</span>(</span>
<span id="cb1-127"><a href="step-one-read-and-stack.html#cb1-127"></a>        <span class="at">X =</span> file_path,</span>
<span id="cb1-128"><a href="step-one-read-and-stack.html#cb1-128"></a>        <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-129"><a href="step-one-read-and-stack.html#cb1-129"></a></span>
<span id="cb1-130"><a href="step-one-read-and-stack.html#cb1-130"></a>          <span class="co"># Return output from apply_statcan_method</span></span>
<span id="cb1-131"><a href="step-one-read-and-stack.html#cb1-131"></a>          <span class="fu">return</span>(</span>
<span id="cb1-132"><a href="step-one-read-and-stack.html#cb1-132"></a>            <span class="fu">apply_statcan_method</span>(</span>
<span id="cb1-133"><a href="step-one-read-and-stack.html#cb1-133"></a>              <span class="at">step =</span> ellipsis_arguments<span class="sc">$</span>step,</span>
<span id="cb1-134"><a href="step-one-read-and-stack.html#cb1-134"></a>              <span class="at">file_path =</span> x</span>
<span id="cb1-135"><a href="step-one-read-and-stack.html#cb1-135"></a>            )</span>
<span id="cb1-136"><a href="step-one-read-and-stack.html#cb1-136"></a>          )</span>
<span id="cb1-137"><a href="step-one-read-and-stack.html#cb1-137"></a></span>
<span id="cb1-138"><a href="step-one-read-and-stack.html#cb1-138"></a>        }</span>
<span id="cb1-139"><a href="step-one-read-and-stack.html#cb1-139"></a>      )</span>
<span id="cb1-140"><a href="step-one-read-and-stack.html#cb1-140"></a>    )</span>
<span id="cb1-141"><a href="step-one-read-and-stack.html#cb1-141"></a></span>
<span id="cb1-142"><a href="step-one-read-and-stack.html#cb1-142"></a>    <span class="co"># Add grouping vector for each unique minute</span></span>
<span id="cb1-143"><a href="step-one-read-and-stack.html#cb1-143"></a>    output<span class="sc">$</span>grp <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb1-144"><a href="step-one-read-and-stack.html#cb1-144"></a>      <span class="fu">factor</span>(</span>
<span id="cb1-145"><a href="step-one-read-and-stack.html#cb1-145"></a>        <span class="fu">paste0</span>(</span>
<span id="cb1-146"><a href="step-one-read-and-stack.html#cb1-146"></a>          output<span class="sc">$</span>file_name,</span>
<span id="cb1-147"><a href="step-one-read-and-stack.html#cb1-147"></a>          <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-148"><a href="step-one-read-and-stack.html#cb1-148"></a>          <span class="fu">format</span>(output<span class="sc">$</span>in_date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb1-149"><a href="step-one-read-and-stack.html#cb1-149"></a>          <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-150"><a href="step-one-read-and-stack.html#cb1-150"></a>          stringr<span class="sc">::</span><span class="fu">str_pad</span>(output<span class="sc">$</span>in_hour, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb1-151"><a href="step-one-read-and-stack.html#cb1-151"></a>          <span class="st">&quot;-&quot;</span>,</span>
<span id="cb1-152"><a href="step-one-read-and-stack.html#cb1-152"></a>          stringr<span class="sc">::</span><span class="fu">str_pad</span>(output<span class="sc">$</span>in_minute, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb1-153"><a href="step-one-read-and-stack.html#cb1-153"></a>        )</span>
<span id="cb1-154"><a href="step-one-read-and-stack.html#cb1-154"></a>      )</span>
<span id="cb1-155"><a href="step-one-read-and-stack.html#cb1-155"></a>    )</span>
<span id="cb1-156"><a href="step-one-read-and-stack.html#cb1-156"></a></span>
<span id="cb1-157"><a href="step-one-read-and-stack.html#cb1-157"></a>    <span class="co"># Relocate grouping vector</span></span>
<span id="cb1-158"><a href="step-one-read-and-stack.html#cb1-158"></a>    output <span class="ot">&lt;-</span> output <span class="sc">%&gt;%</span></span>
<span id="cb1-159"><a href="step-one-read-and-stack.html#cb1-159"></a>      dplyr<span class="sc">::</span><span class="fu">relocate</span>(grp, <span class="at">.after =</span> obsn)</span>
<span id="cb1-160"><a href="step-one-read-and-stack.html#cb1-160"></a></span>
<span id="cb1-161"><a href="step-one-read-and-stack.html#cb1-161"></a>    <span class="fu">return</span>(output)</span>
<span id="cb1-162"><a href="step-one-read-and-stack.html#cb1-162"></a></span>
<span id="cb1-163"><a href="step-one-read-and-stack.html#cb1-163"></a>  <span class="co"># Else, if method parameter is not set to &quot;statcan&quot;, apply default method</span></span>
<span id="cb1-164"><a href="step-one-read-and-stack.html#cb1-164"></a>  } <span class="cf">else</span> {</span>
<span id="cb1-165"><a href="step-one-read-and-stack.html#cb1-165"></a></span>
<span id="cb1-166"><a href="step-one-read-and-stack.html#cb1-166"></a>    <span class="co"># Check if cpu_cores parameter is greater than one and if the file_path parameter contains more than one path</span></span>
<span id="cb1-167"><a href="step-one-read-and-stack.html#cb1-167"></a>    <span class="co"># If so, apply parallel processing</span></span>
<span id="cb1-168"><a href="step-one-read-and-stack.html#cb1-168"></a>    <span class="cf">if</span>(<span class="fu">isTRUE</span>(<span class="fu">class</span>(ellipsis_arguments<span class="sc">$</span>cpu_cores) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;integer&quot;</span>, <span class="st">&quot;numeric&quot;</span>) <span class="sc">&amp;</span> ellipsis_arguments<span class="sc">$</span>cpu_cores <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="fu">length</span>(file_path) <span class="sc">&gt;</span> <span class="dv">1</span>)) {</span>
<span id="cb1-169"><a href="step-one-read-and-stack.html#cb1-169"></a></span>
<span id="cb1-170"><a href="step-one-read-and-stack.html#cb1-170"></a>      <span class="co"># Create cluster</span></span>
<span id="cb1-171"><a href="step-one-read-and-stack.html#cb1-171"></a>      cluster <span class="ot">&lt;-</span> parallel<span class="sc">::</span><span class="fu">makeCluster</span>(ellipsis_arguments<span class="sc">$</span>cpu_cores)</span>
<span id="cb1-172"><a href="step-one-read-and-stack.html#cb1-172"></a></span>
<span id="cb1-173"><a href="step-one-read-and-stack.html#cb1-173"></a>      <span class="co"># Make objects available to nodes in cluster</span></span>
<span id="cb1-174"><a href="step-one-read-and-stack.html#cb1-174"></a>      parallel<span class="sc">::</span><span class="fu">clusterExport</span>(</span>
<span id="cb1-175"><a href="step-one-read-and-stack.html#cb1-175"></a>        <span class="at">cl =</span> cluster,</span>
<span id="cb1-176"><a href="step-one-read-and-stack.html#cb1-176"></a>        <span class="at">varlist =</span> <span class="fu">list</span>(<span class="st">&quot;ellipsis_arguments&quot;</span>, <span class="st">&quot;file_path&quot;</span>),</span>
<span id="cb1-177"><a href="step-one-read-and-stack.html#cb1-177"></a>        <span class="at">envir =</span> <span class="fu">environment</span>()</span>
<span id="cb1-178"><a href="step-one-read-and-stack.html#cb1-178"></a>      )</span>
<span id="cb1-179"><a href="step-one-read-and-stack.html#cb1-179"></a></span>
<span id="cb1-180"><a href="step-one-read-and-stack.html#cb1-180"></a>      <span class="co"># Make packages and functions available to nodes in cluster</span></span>
<span id="cb1-181"><a href="step-one-read-and-stack.html#cb1-181"></a>      <span class="fu">invisible</span>(</span>
<span id="cb1-182"><a href="step-one-read-and-stack.html#cb1-182"></a>        parallel<span class="sc">::</span><span class="fu">clusterEvalQ</span>(</span>
<span id="cb1-183"><a href="step-one-read-and-stack.html#cb1-183"></a>          <span class="at">cl =</span> cluster,</span>
<span id="cb1-184"><a href="step-one-read-and-stack.html#cb1-184"></a>          <span class="at">expr =</span> {</span>
<span id="cb1-185"><a href="step-one-read-and-stack.html#cb1-185"></a></span>
<span id="cb1-186"><a href="step-one-read-and-stack.html#cb1-186"></a>            <span class="co"># Import dependencies</span></span>
<span id="cb1-187"><a href="step-one-read-and-stack.html#cb1-187"></a>            dependencies <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-188"><a href="step-one-read-and-stack.html#cb1-188"></a>              <span class="st">&quot;actigraphr&quot;</span>,</span>
<span id="cb1-189"><a href="step-one-read-and-stack.html#cb1-189"></a>              <span class="st">&quot;DBI&quot;</span>,</span>
<span id="cb1-190"><a href="step-one-read-and-stack.html#cb1-190"></a>              <span class="st">&quot;dplyr&quot;</span>,</span>
<span id="cb1-191"><a href="step-one-read-and-stack.html#cb1-191"></a>              <span class="st">&quot;magrittr&quot;</span>,</span>
<span id="cb1-192"><a href="step-one-read-and-stack.html#cb1-192"></a>              <span class="st">&quot;RSQLite&quot;</span>,</span>
<span id="cb1-193"><a href="step-one-read-and-stack.html#cb1-193"></a>              <span class="st">&quot;stats&quot;</span>,</span>
<span id="cb1-194"><a href="step-one-read-and-stack.html#cb1-194"></a>              <span class="st">&quot;stringr&quot;</span></span>
<span id="cb1-195"><a href="step-one-read-and-stack.html#cb1-195"></a>            )</span>
<span id="cb1-196"><a href="step-one-read-and-stack.html#cb1-196"></a></span>
<span id="cb1-197"><a href="step-one-read-and-stack.html#cb1-197"></a>            import <span class="ot">&lt;-</span> <span class="fu">lapply</span>(dependencies, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-198"><a href="step-one-read-and-stack.html#cb1-198"></a></span>
<span id="cb1-199"><a href="step-one-read-and-stack.html#cb1-199"></a>          }</span>
<span id="cb1-200"><a href="step-one-read-and-stack.html#cb1-200"></a>        )</span>
<span id="cb1-201"><a href="step-one-read-and-stack.html#cb1-201"></a>      )</span>
<span id="cb1-202"><a href="step-one-read-and-stack.html#cb1-202"></a></span>
<span id="cb1-203"><a href="step-one-read-and-stack.html#cb1-203"></a>      <span class="co"># Iterate file_path parameter</span></span>
<span id="cb1-204"><a href="step-one-read-and-stack.html#cb1-204"></a>      <span class="fu">tryCatch</span>(</span>
<span id="cb1-205"><a href="step-one-read-and-stack.html#cb1-205"></a>        <span class="at">expr =</span> {</span>
<span id="cb1-206"><a href="step-one-read-and-stack.html#cb1-206"></a></span>
<span id="cb1-207"><a href="step-one-read-and-stack.html#cb1-207"></a>          output <span class="ot">&lt;-</span> pbapply<span class="sc">::</span><span class="fu">pblapply</span>(</span>
<span id="cb1-208"><a href="step-one-read-and-stack.html#cb1-208"></a>            <span class="at">cl =</span> cluster,</span>
<span id="cb1-209"><a href="step-one-read-and-stack.html#cb1-209"></a>            <span class="at">X =</span> file_path,</span>
<span id="cb1-210"><a href="step-one-read-and-stack.html#cb1-210"></a>            <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-211"><a href="step-one-read-and-stack.html#cb1-211"></a></span>
<span id="cb1-212"><a href="step-one-read-and-stack.html#cb1-212"></a>              <span class="co"># Create connection to file</span></span>
<span id="cb1-213"><a href="step-one-read-and-stack.html#cb1-213"></a>              connection <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb1-214"><a href="step-one-read-and-stack.html#cb1-214"></a>                <span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(),</span>
<span id="cb1-215"><a href="step-one-read-and-stack.html#cb1-215"></a>                <span class="at">dbname =</span> x</span>
<span id="cb1-216"><a href="step-one-read-and-stack.html#cb1-216"></a>              )</span>
<span id="cb1-217"><a href="step-one-read-and-stack.html#cb1-217"></a></span>
<span id="cb1-218"><a href="step-one-read-and-stack.html#cb1-218"></a>              <span class="co"># Get all table names from file and drop in character vector</span></span>
<span id="cb1-219"><a href="step-one-read-and-stack.html#cb1-219"></a>              table_names <span class="ot">&lt;-</span> connection <span class="sc">%&gt;%</span></span>
<span id="cb1-220"><a href="step-one-read-and-stack.html#cb1-220"></a>                dplyr<span class="sc">::</span><span class="fu">tbl</span>(</span>
<span id="cb1-221"><a href="step-one-read-and-stack.html#cb1-221"></a>                  dplyr<span class="sc">::</span><span class="fu">sql</span>(</span>
<span id="cb1-222"><a href="step-one-read-and-stack.html#cb1-222"></a>                    <span class="st">&quot;SELECT name FROM sqlite_master WHERE type = &#39;table&#39;&quot;</span></span>
<span id="cb1-223"><a href="step-one-read-and-stack.html#cb1-223"></a>                  )</span>
<span id="cb1-224"><a href="step-one-read-and-stack.html#cb1-224"></a>                ) <span class="sc">%&gt;%</span></span>
<span id="cb1-225"><a href="step-one-read-and-stack.html#cb1-225"></a>                dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-226"><a href="step-one-read-and-stack.html#cb1-226"></a>                <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-227"><a href="step-one-read-and-stack.html#cb1-227"></a>                <span class="fu">unname</span>()</span>
<span id="cb1-228"><a href="step-one-read-and-stack.html#cb1-228"></a></span>
<span id="cb1-229"><a href="step-one-read-and-stack.html#cb1-229"></a>              <span class="co"># If required table names don&#39;t exist, throw error message</span></span>
<span id="cb1-230"><a href="step-one-read-and-stack.html#cb1-230"></a>              <span class="cf">if</span>(<span class="st">&quot;table_name&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(ellipsis_arguments) <span class="sc">&amp;</span> <span class="fu">sum</span>(ellipsis_arguments<span class="sc">$</span>table_name <span class="sc">%in%</span> table_names) <span class="sc">!=</span> <span class="fu">length</span>(ellipsis_arguments<span class="sc">$</span>table_name)) {</span>
<span id="cb1-231"><a href="step-one-read-and-stack.html#cb1-231"></a></span>
<span id="cb1-232"><a href="step-one-read-and-stack.html#cb1-232"></a>                <span class="co"># Close connection to the file</span></span>
<span id="cb1-233"><a href="step-one-read-and-stack.html#cb1-233"></a>                DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(<span class="at">conn =</span> connection)</span>
<span id="cb1-234"><a href="step-one-read-and-stack.html#cb1-234"></a></span>
<span id="cb1-235"><a href="step-one-read-and-stack.html#cb1-235"></a>                <span class="co"># Error message</span></span>
<span id="cb1-236"><a href="step-one-read-and-stack.html#cb1-236"></a>                <span class="fu">stop</span>(</span>
<span id="cb1-237"><a href="step-one-read-and-stack.html#cb1-237"></a>                  <span class="fu">paste0</span>(</span>
<span id="cb1-238"><a href="step-one-read-and-stack.html#cb1-238"></a>                    <span class="st">&quot;[actigraphr error message]: some table names specified in the `table_name` parameter (&quot;</span>,</span>
<span id="cb1-239"><a href="step-one-read-and-stack.html#cb1-239"></a>                    <span class="fu">paste0</span>(ellipsis_arguments<span class="sc">$</span>table_name[<span class="fu">which</span>(<span class="sc">!</span> ellipsis_arguments<span class="sc">$</span>table_name <span class="sc">%in%</span> table_names)], <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>),</span>
<span id="cb1-240"><a href="step-one-read-and-stack.html#cb1-240"></a>                    <span class="st">&quot;) are not in this file.&quot;</span></span>
<span id="cb1-241"><a href="step-one-read-and-stack.html#cb1-241"></a>                  )</span>
<span id="cb1-242"><a href="step-one-read-and-stack.html#cb1-242"></a>                )</span>
<span id="cb1-243"><a href="step-one-read-and-stack.html#cb1-243"></a></span>
<span id="cb1-244"><a href="step-one-read-and-stack.html#cb1-244"></a>                <span class="co"># Else, continue with data retrieval</span></span>
<span id="cb1-245"><a href="step-one-read-and-stack.html#cb1-245"></a>              } <span class="cf">else</span> {</span>
<span id="cb1-246"><a href="step-one-read-and-stack.html#cb1-246"></a></span>
<span id="cb1-247"><a href="step-one-read-and-stack.html#cb1-247"></a>                <span class="co"># If table_name parameter is set, subset table_names to table_name parameter</span></span>
<span id="cb1-248"><a href="step-one-read-and-stack.html#cb1-248"></a>                <span class="cf">if</span>(<span class="st">&quot;table_name&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(ellipsis_arguments)) {</span>
<span id="cb1-249"><a href="step-one-read-and-stack.html#cb1-249"></a></span>
<span id="cb1-250"><a href="step-one-read-and-stack.html#cb1-250"></a>                  table_names <span class="ot">&lt;-</span> ellipsis_arguments<span class="sc">$</span>table_name</span>
<span id="cb1-251"><a href="step-one-read-and-stack.html#cb1-251"></a></span>
<span id="cb1-252"><a href="step-one-read-and-stack.html#cb1-252"></a>                }</span>
<span id="cb1-253"><a href="step-one-read-and-stack.html#cb1-253"></a></span>
<span id="cb1-254"><a href="step-one-read-and-stack.html#cb1-254"></a>                <span class="co"># Iterate through each table name, get any data and add to a list</span></span>
<span id="cb1-255"><a href="step-one-read-and-stack.html#cb1-255"></a>                output <span class="ot">&lt;-</span> <span class="fu">lapply</span>(table_names, <span class="cf">function</span>(x) <span class="fu">get_agd_table</span>(x, connection))</span>
<span id="cb1-256"><a href="step-one-read-and-stack.html#cb1-256"></a></span>
<span id="cb1-257"><a href="step-one-read-and-stack.html#cb1-257"></a>                <span class="co"># Name list items</span></span>
<span id="cb1-258"><a href="step-one-read-and-stack.html#cb1-258"></a>                <span class="fu">names</span>(output) <span class="ot">&lt;-</span> table_names</span>
<span id="cb1-259"><a href="step-one-read-and-stack.html#cb1-259"></a></span>
<span id="cb1-260"><a href="step-one-read-and-stack.html#cb1-260"></a>                <span class="co"># Close connection to the file</span></span>
<span id="cb1-261"><a href="step-one-read-and-stack.html#cb1-261"></a>                DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(<span class="at">conn =</span> connection)</span>
<span id="cb1-262"><a href="step-one-read-and-stack.html#cb1-262"></a></span>
<span id="cb1-263"><a href="step-one-read-and-stack.html#cb1-263"></a>                <span class="co"># Return output</span></span>
<span id="cb1-264"><a href="step-one-read-and-stack.html#cb1-264"></a>                <span class="fu">return</span>(output)</span>
<span id="cb1-265"><a href="step-one-read-and-stack.html#cb1-265"></a></span>
<span id="cb1-266"><a href="step-one-read-and-stack.html#cb1-266"></a>              }</span>
<span id="cb1-267"><a href="step-one-read-and-stack.html#cb1-267"></a></span>
<span id="cb1-268"><a href="step-one-read-and-stack.html#cb1-268"></a>            }</span>
<span id="cb1-269"><a href="step-one-read-and-stack.html#cb1-269"></a>          )</span>
<span id="cb1-270"><a href="step-one-read-and-stack.html#cb1-270"></a></span>
<span id="cb1-271"><a href="step-one-read-and-stack.html#cb1-271"></a>          <span class="co"># Add file names to output</span></span>
<span id="cb1-272"><a href="step-one-read-and-stack.html#cb1-272"></a>          <span class="fu">names</span>(output) <span class="ot">&lt;-</span> <span class="fu">basename</span>(file_path)</span>
<span id="cb1-273"><a href="step-one-read-and-stack.html#cb1-273"></a></span>
<span id="cb1-274"><a href="step-one-read-and-stack.html#cb1-274"></a>          <span class="co"># Stop cluster</span></span>
<span id="cb1-275"><a href="step-one-read-and-stack.html#cb1-275"></a>          parallel<span class="sc">::</span><span class="fu">stopCluster</span>(cluster)</span>
<span id="cb1-276"><a href="step-one-read-and-stack.html#cb1-276"></a></span>
<span id="cb1-277"><a href="step-one-read-and-stack.html#cb1-277"></a>          <span class="co"># Return output</span></span>
<span id="cb1-278"><a href="step-one-read-and-stack.html#cb1-278"></a>          <span class="fu">return</span>(output)</span>
<span id="cb1-279"><a href="step-one-read-and-stack.html#cb1-279"></a></span>
<span id="cb1-280"><a href="step-one-read-and-stack.html#cb1-280"></a>        },</span>
<span id="cb1-281"><a href="step-one-read-and-stack.html#cb1-281"></a>        <span class="at">error =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-282"><a href="step-one-read-and-stack.html#cb1-282"></a></span>
<span id="cb1-283"><a href="step-one-read-and-stack.html#cb1-283"></a>          <span class="co"># Stop cluster</span></span>
<span id="cb1-284"><a href="step-one-read-and-stack.html#cb1-284"></a>          parallel<span class="sc">::</span><span class="fu">stopCluster</span>(cluster)</span>
<span id="cb1-285"><a href="step-one-read-and-stack.html#cb1-285"></a></span>
<span id="cb1-286"><a href="step-one-read-and-stack.html#cb1-286"></a>        }</span>
<span id="cb1-287"><a href="step-one-read-and-stack.html#cb1-287"></a>      )</span>
<span id="cb1-288"><a href="step-one-read-and-stack.html#cb1-288"></a></span>
<span id="cb1-289"><a href="step-one-read-and-stack.html#cb1-289"></a>    <span class="co"># Else, apply serial processing</span></span>
<span id="cb1-290"><a href="step-one-read-and-stack.html#cb1-290"></a>    } <span class="cf">else</span> {</span>
<span id="cb1-291"><a href="step-one-read-and-stack.html#cb1-291"></a></span>
<span id="cb1-292"><a href="step-one-read-and-stack.html#cb1-292"></a>      output <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb1-293"><a href="step-one-read-and-stack.html#cb1-293"></a>        <span class="at">X =</span> file_path,</span>
<span id="cb1-294"><a href="step-one-read-and-stack.html#cb1-294"></a>        <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb1-295"><a href="step-one-read-and-stack.html#cb1-295"></a></span>
<span id="cb1-296"><a href="step-one-read-and-stack.html#cb1-296"></a>          <span class="co"># Create a connection to the file</span></span>
<span id="cb1-297"><a href="step-one-read-and-stack.html#cb1-297"></a>          connection <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb1-298"><a href="step-one-read-and-stack.html#cb1-298"></a>            <span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(),</span>
<span id="cb1-299"><a href="step-one-read-and-stack.html#cb1-299"></a>            <span class="at">dbname =</span> x</span>
<span id="cb1-300"><a href="step-one-read-and-stack.html#cb1-300"></a>          )</span>
<span id="cb1-301"><a href="step-one-read-and-stack.html#cb1-301"></a></span>
<span id="cb1-302"><a href="step-one-read-and-stack.html#cb1-302"></a>          <span class="co"># Get all table names from file and drop in character vector</span></span>
<span id="cb1-303"><a href="step-one-read-and-stack.html#cb1-303"></a>          table_names <span class="ot">&lt;-</span> connection <span class="sc">%&gt;%</span></span>
<span id="cb1-304"><a href="step-one-read-and-stack.html#cb1-304"></a>            dplyr<span class="sc">::</span><span class="fu">tbl</span>(</span>
<span id="cb1-305"><a href="step-one-read-and-stack.html#cb1-305"></a>              dplyr<span class="sc">::</span><span class="fu">sql</span>(</span>
<span id="cb1-306"><a href="step-one-read-and-stack.html#cb1-306"></a>                <span class="st">&quot;SELECT name FROM sqlite_master WHERE type = &#39;table&#39;&quot;</span></span>
<span id="cb1-307"><a href="step-one-read-and-stack.html#cb1-307"></a>              )</span>
<span id="cb1-308"><a href="step-one-read-and-stack.html#cb1-308"></a>            ) <span class="sc">%&gt;%</span></span>
<span id="cb1-309"><a href="step-one-read-and-stack.html#cb1-309"></a>            dplyr<span class="sc">::</span><span class="fu">collect</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-310"><a href="step-one-read-and-stack.html#cb1-310"></a>            <span class="fu">unlist</span>() <span class="sc">%&gt;%</span></span>
<span id="cb1-311"><a href="step-one-read-and-stack.html#cb1-311"></a>            <span class="fu">unname</span>()</span>
<span id="cb1-312"><a href="step-one-read-and-stack.html#cb1-312"></a></span>
<span id="cb1-313"><a href="step-one-read-and-stack.html#cb1-313"></a>          <span class="co"># If required table names don&#39;t exist, throw error message</span></span>
<span id="cb1-314"><a href="step-one-read-and-stack.html#cb1-314"></a>          <span class="cf">if</span>(<span class="st">&quot;table_name&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(ellipsis_arguments) <span class="sc">&amp;</span> <span class="fu">sum</span>(ellipsis_arguments<span class="sc">$</span>table_name <span class="sc">%in%</span> table_names) <span class="sc">!=</span> <span class="fu">length</span>(ellipsis_arguments<span class="sc">$</span>table_name)) {</span>
<span id="cb1-315"><a href="step-one-read-and-stack.html#cb1-315"></a></span>
<span id="cb1-316"><a href="step-one-read-and-stack.html#cb1-316"></a>            <span class="co"># Close connection to the file</span></span>
<span id="cb1-317"><a href="step-one-read-and-stack.html#cb1-317"></a>            DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(<span class="at">conn =</span> connection)</span>
<span id="cb1-318"><a href="step-one-read-and-stack.html#cb1-318"></a></span>
<span id="cb1-319"><a href="step-one-read-and-stack.html#cb1-319"></a>            <span class="co"># Error message</span></span>
<span id="cb1-320"><a href="step-one-read-and-stack.html#cb1-320"></a>            <span class="fu">stop</span>(</span>
<span id="cb1-321"><a href="step-one-read-and-stack.html#cb1-321"></a>              <span class="fu">paste0</span>(</span>
<span id="cb1-322"><a href="step-one-read-and-stack.html#cb1-322"></a>                <span class="st">&quot;[actigraphr error message]: some table names specified in the `table_name` parameter (&quot;</span>,</span>
<span id="cb1-323"><a href="step-one-read-and-stack.html#cb1-323"></a>                <span class="fu">paste0</span>(ellipsis_arguments<span class="sc">$</span>table_name[<span class="fu">which</span>(<span class="sc">!</span> ellipsis_arguments<span class="sc">$</span>table_name <span class="sc">%in%</span> table_names)], <span class="at">collapse =</span> <span class="st">&quot;, &quot;</span>),</span>
<span id="cb1-324"><a href="step-one-read-and-stack.html#cb1-324"></a>                <span class="st">&quot;) are not in this file.&quot;</span></span>
<span id="cb1-325"><a href="step-one-read-and-stack.html#cb1-325"></a>              )</span>
<span id="cb1-326"><a href="step-one-read-and-stack.html#cb1-326"></a>            )</span>
<span id="cb1-327"><a href="step-one-read-and-stack.html#cb1-327"></a></span>
<span id="cb1-328"><a href="step-one-read-and-stack.html#cb1-328"></a>            <span class="co"># Else, continue with data retrieval</span></span>
<span id="cb1-329"><a href="step-one-read-and-stack.html#cb1-329"></a>          } <span class="cf">else</span> {</span>
<span id="cb1-330"><a href="step-one-read-and-stack.html#cb1-330"></a></span>
<span id="cb1-331"><a href="step-one-read-and-stack.html#cb1-331"></a>            <span class="co"># If table_name parameter is set, subset table_names to table_name parameter</span></span>
<span id="cb1-332"><a href="step-one-read-and-stack.html#cb1-332"></a>            <span class="cf">if</span>(<span class="st">&quot;table_name&quot;</span> <span class="sc">%in%</span> <span class="fu">names</span>(ellipsis_arguments)) {</span>
<span id="cb1-333"><a href="step-one-read-and-stack.html#cb1-333"></a></span>
<span id="cb1-334"><a href="step-one-read-and-stack.html#cb1-334"></a>              table_names <span class="ot">&lt;-</span> ellipsis_arguments<span class="sc">$</span>table_name</span>
<span id="cb1-335"><a href="step-one-read-and-stack.html#cb1-335"></a></span>
<span id="cb1-336"><a href="step-one-read-and-stack.html#cb1-336"></a>            }</span>
<span id="cb1-337"><a href="step-one-read-and-stack.html#cb1-337"></a></span>
<span id="cb1-338"><a href="step-one-read-and-stack.html#cb1-338"></a>            <span class="co"># Iterate table names, get any data and add to a list</span></span>
<span id="cb1-339"><a href="step-one-read-and-stack.html#cb1-339"></a>            output <span class="ot">&lt;-</span> <span class="fu">lapply</span>(table_names, <span class="cf">function</span>(x) <span class="fu">get_agd_table</span>(x, connection))</span>
<span id="cb1-340"><a href="step-one-read-and-stack.html#cb1-340"></a></span>
<span id="cb1-341"><a href="step-one-read-and-stack.html#cb1-341"></a>            <span class="co"># Name list items</span></span>
<span id="cb1-342"><a href="step-one-read-and-stack.html#cb1-342"></a>            <span class="fu">names</span>(output) <span class="ot">&lt;-</span> table_names</span>
<span id="cb1-343"><a href="step-one-read-and-stack.html#cb1-343"></a></span>
<span id="cb1-344"><a href="step-one-read-and-stack.html#cb1-344"></a>            <span class="co"># Close connection to file</span></span>
<span id="cb1-345"><a href="step-one-read-and-stack.html#cb1-345"></a>            DBI<span class="sc">::</span><span class="fu">dbDisconnect</span>(<span class="at">conn =</span> connection)</span>
<span id="cb1-346"><a href="step-one-read-and-stack.html#cb1-346"></a></span>
<span id="cb1-347"><a href="step-one-read-and-stack.html#cb1-347"></a>            <span class="co"># Return output</span></span>
<span id="cb1-348"><a href="step-one-read-and-stack.html#cb1-348"></a>            <span class="fu">return</span>(output)</span>
<span id="cb1-349"><a href="step-one-read-and-stack.html#cb1-349"></a></span>
<span id="cb1-350"><a href="step-one-read-and-stack.html#cb1-350"></a>          }</span>
<span id="cb1-351"><a href="step-one-read-and-stack.html#cb1-351"></a></span>
<span id="cb1-352"><a href="step-one-read-and-stack.html#cb1-352"></a>        }</span>
<span id="cb1-353"><a href="step-one-read-and-stack.html#cb1-353"></a>      )</span>
<span id="cb1-354"><a href="step-one-read-and-stack.html#cb1-354"></a></span>
<span id="cb1-355"><a href="step-one-read-and-stack.html#cb1-355"></a>      <span class="co"># Add file names to output</span></span>
<span id="cb1-356"><a href="step-one-read-and-stack.html#cb1-356"></a>      <span class="fu">names</span>(output) <span class="ot">&lt;-</span> <span class="fu">basename</span>(file_path)</span>
<span id="cb1-357"><a href="step-one-read-and-stack.html#cb1-357"></a></span>
<span id="cb1-358"><a href="step-one-read-and-stack.html#cb1-358"></a>      <span class="co"># Return output</span></span>
<span id="cb1-359"><a href="step-one-read-and-stack.html#cb1-359"></a>      <span class="fu">return</span>(output)</span>
<span id="cb1-360"><a href="step-one-read-and-stack.html#cb1-360"></a></span>
<span id="cb1-361"><a href="step-one-read-and-stack.html#cb1-361"></a>    }</span>
<span id="cb1-362"><a href="step-one-read-and-stack.html#cb1-362"></a></span>
<span id="cb1-363"><a href="step-one-read-and-stack.html#cb1-363"></a>  }</span>
<span id="cb1-364"><a href="step-one-read-and-stack.html#cb1-364"></a></span>
<span id="cb1-365"><a href="step-one-read-and-stack.html#cb1-365"></a>}</span></code></pre></div>
</div>
</div>
<div id="get_agd_table" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> get_agd_table()<a href="step-one-read-and-stack.html#get_agd_table" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="r-documentation-1" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> R documentation<a href="step-one-read-and-stack.html#r-documentation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="img/get-agd-table.png" width="100%" /></p>
</div>
<div id="source-code-1" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Source code<a href="step-one-read-and-stack.html#source-code-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb2-1"><a href="step-one-read-and-stack.html#cb2-1"></a>get_agd_table <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">table_name =</span> <span class="cn">NULL</span>, <span class="at">connection =</span> <span class="cn">NULL</span>) {</span>
<span id="cb2-2"><a href="step-one-read-and-stack.html#cb2-2"></a></span>
<span id="cb2-3"><a href="step-one-read-and-stack.html#cb2-3"></a>  <span class="co"># Throw error message if table_name parameter is unset</span></span>
<span id="cb2-4"><a href="step-one-read-and-stack.html#cb2-4"></a>  <span class="cf">if</span>(<span class="fu">length</span>(table_name) <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb2-5"><a href="step-one-read-and-stack.html#cb2-5"></a></span>
<span id="cb2-6"><a href="step-one-read-and-stack.html#cb2-6"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the table_name parameter must be set.&quot;</span>)</span>
<span id="cb2-7"><a href="step-one-read-and-stack.html#cb2-7"></a></span>
<span id="cb2-8"><a href="step-one-read-and-stack.html#cb2-8"></a>  <span class="co"># Else, throw error message if connection parameter is unset</span></span>
<span id="cb2-9"><a href="step-one-read-and-stack.html#cb2-9"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">length</span>(connection) <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb2-10"><a href="step-one-read-and-stack.html#cb2-10"></a></span>
<span id="cb2-11"><a href="step-one-read-and-stack.html#cb2-11"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the connection parameter must be set.&quot;</span>)</span>
<span id="cb2-12"><a href="step-one-read-and-stack.html#cb2-12"></a></span>
<span id="cb2-13"><a href="step-one-read-and-stack.html#cb2-13"></a>  <span class="co"># Else, throw error message if connection parameter is not a SQLiteConnection object</span></span>
<span id="cb2-14"><a href="step-one-read-and-stack.html#cb2-14"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">!</span> <span class="fu">class</span>(connection) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;SQLiteConnection&quot;</span>)) {</span>
<span id="cb2-15"><a href="step-one-read-and-stack.html#cb2-15"></a></span>
<span id="cb2-16"><a href="step-one-read-and-stack.html#cb2-16"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the connection parameter must be an SQLiteConnection object (created using DBI::dbConnect).&quot;</span>)</span>
<span id="cb2-17"><a href="step-one-read-and-stack.html#cb2-17"></a></span>
<span id="cb2-18"><a href="step-one-read-and-stack.html#cb2-18"></a>  }</span>
<span id="cb2-19"><a href="step-one-read-and-stack.html#cb2-19"></a></span>
<span id="cb2-20"><a href="step-one-read-and-stack.html#cb2-20"></a>  <span class="co"># Get data from table</span></span>
<span id="cb2-21"><a href="step-one-read-and-stack.html#cb2-21"></a>  output <span class="ot">&lt;-</span> connection <span class="sc">%&gt;%</span></span>
<span id="cb2-22"><a href="step-one-read-and-stack.html#cb2-22"></a>    dplyr<span class="sc">::</span><span class="fu">tbl</span>(dplyr<span class="sc">::</span><span class="fu">sql</span>(<span class="fu">paste0</span>(<span class="st">&quot;SELECT * FROM &quot;</span>, table_name))) <span class="sc">%&gt;%</span></span>
<span id="cb2-23"><a href="step-one-read-and-stack.html#cb2-23"></a>      dplyr<span class="sc">::</span><span class="fu">collect</span>(<span class="at">n =</span> <span class="cn">Inf</span>)</span>
<span id="cb2-24"><a href="step-one-read-and-stack.html#cb2-24"></a></span>
<span id="cb2-25"><a href="step-one-read-and-stack.html#cb2-25"></a>  <span class="co"># Coerce any integer64 vectors to date/time objects</span></span>
<span id="cb2-26"><a href="step-one-read-and-stack.html#cb2-26"></a>  output <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(</span>
<span id="cb2-27"><a href="step-one-read-and-stack.html#cb2-27"></a>    <span class="fu">lapply</span>(output, <span class="cf">function</span>(x) {</span>
<span id="cb2-28"><a href="step-one-read-and-stack.html#cb2-28"></a></span>
<span id="cb2-29"><a href="step-one-read-and-stack.html#cb2-29"></a>      <span class="cf">if</span>(<span class="fu">class</span>(x) <span class="sc">==</span> <span class="st">&quot;integer64&quot;</span>) {</span>
<span id="cb2-30"><a href="step-one-read-and-stack.html#cb2-30"></a></span>
<span id="cb2-31"><a href="step-one-read-and-stack.html#cb2-31"></a>        x <span class="ot">&lt;-</span> (x <span class="sc">/</span> <span class="fl">1e7</span>) <span class="sc">-</span> <span class="dv">62135596800</span> <span class="sc">+</span> (<span class="dv">3600</span> <span class="sc">*</span> <span class="dv">4</span>)</span>
<span id="cb2-32"><a href="step-one-read-and-stack.html#cb2-32"></a>        <span class="fu">return</span>(<span class="fu">as.POSIXct</span>(x, <span class="at">origin =</span> <span class="st">&quot;1970-01-01&quot;</span>))</span>
<span id="cb2-33"><a href="step-one-read-and-stack.html#cb2-33"></a></span>
<span id="cb2-34"><a href="step-one-read-and-stack.html#cb2-34"></a>      } <span class="cf">else</span> {</span>
<span id="cb2-35"><a href="step-one-read-and-stack.html#cb2-35"></a></span>
<span id="cb2-36"><a href="step-one-read-and-stack.html#cb2-36"></a>        <span class="fu">return</span>(x)</span>
<span id="cb2-37"><a href="step-one-read-and-stack.html#cb2-37"></a></span>
<span id="cb2-38"><a href="step-one-read-and-stack.html#cb2-38"></a>      }</span>
<span id="cb2-39"><a href="step-one-read-and-stack.html#cb2-39"></a></span>
<span id="cb2-40"><a href="step-one-read-and-stack.html#cb2-40"></a>    })</span>
<span id="cb2-41"><a href="step-one-read-and-stack.html#cb2-41"></a>  )</span>
<span id="cb2-42"><a href="step-one-read-and-stack.html#cb2-42"></a></span>
<span id="cb2-43"><a href="step-one-read-and-stack.html#cb2-43"></a>  <span class="co"># Return output</span></span>
<span id="cb2-44"><a href="step-one-read-and-stack.html#cb2-44"></a>  <span class="fu">return</span>(output)</span>
<span id="cb2-45"><a href="step-one-read-and-stack.html#cb2-45"></a></span>
<span id="cb2-46"><a href="step-one-read-and-stack.html#cb2-46"></a>}</span></code></pre></div>
</div>
</div>
<div id="apply_statcan_method" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> apply_statcan_method()<a href="step-one-read-and-stack.html#apply_statcan_method" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="r-documentation-2" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> R documentation<a href="step-one-read-and-stack.html#r-documentation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="img/apply-statcan-method.png" width="100%" /></p>
</div>
<div id="source-code-2" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Source code<a href="step-one-read-and-stack.html#source-code-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource r numberLines"><code class="sourceCode r"><span id="cb3-1"><a href="step-one-read-and-stack.html#cb3-1"></a>apply_statcan_method <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">step =</span> <span class="cn">NULL</span>, ...) {</span>
<span id="cb3-2"><a href="step-one-read-and-stack.html#cb3-2"></a></span>
<span id="cb3-3"><a href="step-one-read-and-stack.html#cb3-3"></a>  <span class="co"># Get ellipsis arguments</span></span>
<span id="cb3-4"><a href="step-one-read-and-stack.html#cb3-4"></a>  ellipsis_arguments <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb3-5"><a href="step-one-read-and-stack.html#cb3-5"></a></span>
<span id="cb3-6"><a href="step-one-read-and-stack.html#cb3-6"></a>  <span class="co"># Throw error message if step parameter is unset</span></span>
<span id="cb3-7"><a href="step-one-read-and-stack.html#cb3-7"></a>  <span class="cf">if</span>(<span class="fu">length</span>(step) <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb3-8"><a href="step-one-read-and-stack.html#cb3-8"></a></span>
<span id="cb3-9"><a href="step-one-read-and-stack.html#cb3-9"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the step parameter must be set to an integer between one and four.&quot;</span>)</span>
<span id="cb3-10"><a href="step-one-read-and-stack.html#cb3-10"></a></span>
<span id="cb3-11"><a href="step-one-read-and-stack.html#cb3-11"></a>  <span class="co"># Else, throw error message if step parameter is set but not between one and four</span></span>
<span id="cb3-12"><a href="step-one-read-and-stack.html#cb3-12"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">!</span> step <span class="sc">%in%</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb3-13"><a href="step-one-read-and-stack.html#cb3-13"></a></span>
<span id="cb3-14"><a href="step-one-read-and-stack.html#cb3-14"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the step parameter must be set to an integer between one and four.&quot;</span>)</span>
<span id="cb3-15"><a href="step-one-read-and-stack.html#cb3-15"></a></span>
<span id="cb3-16"><a href="step-one-read-and-stack.html#cb3-16"></a>  <span class="co"># Else, throw error message if step parameter is a valid value but if file_path parameter is unset</span></span>
<span id="cb3-17"><a href="step-one-read-and-stack.html#cb3-17"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">length</span>(ellipsis_arguments<span class="sc">$</span>file_path) <span class="sc">&lt;</span> <span class="dv">1</span>) {</span>
<span id="cb3-18"><a href="step-one-read-and-stack.html#cb3-18"></a></span>
<span id="cb3-19"><a href="step-one-read-and-stack.html#cb3-19"></a>    <span class="fu">stop</span>(<span class="st">&quot;[actigraphr error message]: the file_path parameter must be set when the step parameter is set to 1.&quot;</span>)</span>
<span id="cb3-20"><a href="step-one-read-and-stack.html#cb3-20"></a></span>
<span id="cb3-21"><a href="step-one-read-and-stack.html#cb3-21"></a>  <span class="co"># Else, throw error message if file_path parameter does not exist</span></span>
<span id="cb3-22"><a href="step-one-read-and-stack.html#cb3-22"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="sc">!</span> <span class="fu">file.exists</span>(ellipsis_arguments<span class="sc">$</span>file_path)) {</span>
<span id="cb3-23"><a href="step-one-read-and-stack.html#cb3-23"></a></span>
<span id="cb3-24"><a href="step-one-read-and-stack.html#cb3-24"></a>    <span class="fu">stop</span>(</span>
<span id="cb3-25"><a href="step-one-read-and-stack.html#cb3-25"></a>      <span class="fu">paste0</span>(</span>
<span id="cb3-26"><a href="step-one-read-and-stack.html#cb3-26"></a>        <span class="st">&quot;[actigraphr error message]: the file path, &quot;</span>,</span>
<span id="cb3-27"><a href="step-one-read-and-stack.html#cb3-27"></a>        ellipsis_arguments<span class="sc">$</span>file_path,</span>
<span id="cb3-28"><a href="step-one-read-and-stack.html#cb3-28"></a>        <span class="st">&quot;, does not exist.&quot;</span></span>
<span id="cb3-29"><a href="step-one-read-and-stack.html#cb3-29"></a>      )</span>
<span id="cb3-30"><a href="step-one-read-and-stack.html#cb3-30"></a>    )</span>
<span id="cb3-31"><a href="step-one-read-and-stack.html#cb3-31"></a></span>
<span id="cb3-32"><a href="step-one-read-and-stack.html#cb3-32"></a>  }</span>
<span id="cb3-33"><a href="step-one-read-and-stack.html#cb3-33"></a></span>
<span id="cb3-34"><a href="step-one-read-and-stack.html#cb3-34"></a>  <span class="co"># If step parameter is set to one, import data and apply preliminary data processing</span></span>
<span id="cb3-35"><a href="step-one-read-and-stack.html#cb3-35"></a>  <span class="cf">if</span>(step <span class="sc">==</span> <span class="dv">1</span>) {</span>
<span id="cb3-36"><a href="step-one-read-and-stack.html#cb3-36"></a></span>
<span id="cb3-37"><a href="step-one-read-and-stack.html#cb3-37"></a>    <span class="co"># Import .agd file</span></span>
<span id="cb3-38"><a href="step-one-read-and-stack.html#cb3-38"></a>    agd <span class="ot">&lt;-</span> <span class="fu">get_agd_data</span>(ellipsis_arguments<span class="sc">$</span>file_path)[[<span class="fu">basename</span>(ellipsis_arguments<span class="sc">$</span>file_path)]]</span>
<span id="cb3-39"><a href="step-one-read-and-stack.html#cb3-39"></a></span>
<span id="cb3-40"><a href="step-one-read-and-stack.html#cb3-40"></a>    <span class="co"># Get filter</span></span>
<span id="cb3-41"><a href="step-one-read-and-stack.html#cb3-41"></a>    filter <span class="ot">&lt;-</span> agd<span class="sc">$</span>settings<span class="sc">$</span>settingValue[agd<span class="sc">$</span>settings<span class="sc">$</span>settingName <span class="sc">==</span> <span class="st">&quot;filter&quot;</span>]</span>
<span id="cb3-42"><a href="step-one-read-and-stack.html#cb3-42"></a></span>
<span id="cb3-43"><a href="step-one-read-and-stack.html#cb3-43"></a>    <span class="co"># Get epoch length</span></span>
<span id="cb3-44"><a href="step-one-read-and-stack.html#cb3-44"></a>    epoch_length <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(agd<span class="sc">$</span>settings<span class="sc">$</span>settingValue[agd<span class="sc">$</span>settings<span class="sc">$</span>settingName <span class="sc">==</span> <span class="st">&quot;epochlength&quot;</span>])</span>
<span id="cb3-45"><a href="step-one-read-and-stack.html#cb3-45"></a></span>
<span id="cb3-46"><a href="step-one-read-and-stack.html#cb3-46"></a>    <span class="co"># Get data</span></span>
<span id="cb3-47"><a href="step-one-read-and-stack.html#cb3-47"></a>    agd_data <span class="ot">&lt;-</span> agd<span class="sc">$</span>data</span>
<span id="cb3-48"><a href="step-one-read-and-stack.html#cb3-48"></a></span>
<span id="cb3-49"><a href="step-one-read-and-stack.html#cb3-49"></a>    <span class="co"># Get start date (when ActiGraph initialized)</span></span>
<span id="cb3-50"><a href="step-one-read-and-stack.html#cb3-50"></a>    start_date <span class="ot">&lt;-</span> agd<span class="sc">$</span>data<span class="sc">$</span>dataTimestamp[<span class="dv">1</span>]</span>
<span id="cb3-51"><a href="step-one-read-and-stack.html#cb3-51"></a></span>
<span id="cb3-52"><a href="step-one-read-and-stack.html#cb3-52"></a>    <span class="co"># If dataTimestamp vector is not POSIXct object, coerce the vector</span></span>
<span id="cb3-53"><a href="step-one-read-and-stack.html#cb3-53"></a>    <span class="cf">if</span>(<span class="sc">!</span> <span class="st">&quot;POSIXct&quot;</span> <span class="sc">%in%</span> <span class="fu">class</span>(agd_data<span class="sc">$</span>dataTimestamp)) {</span>
<span id="cb3-54"><a href="step-one-read-and-stack.html#cb3-54"></a></span>
<span id="cb3-55"><a href="step-one-read-and-stack.html#cb3-55"></a>      agd_data<span class="sc">$</span>dataTimestamp <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(agd_data<span class="sc">$</span>dataTimestamp)</span>
<span id="cb3-56"><a href="step-one-read-and-stack.html#cb3-56"></a></span>
<span id="cb3-57"><a href="step-one-read-and-stack.html#cb3-57"></a>    }</span>
<span id="cb3-58"><a href="step-one-read-and-stack.html#cb3-58"></a></span>
<span id="cb3-59"><a href="step-one-read-and-stack.html#cb3-59"></a>    <span class="co"># Sort data by dataTimestamp vector</span></span>
<span id="cb3-60"><a href="step-one-read-and-stack.html#cb3-60"></a>    agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-61"><a href="step-one-read-and-stack.html#cb3-61"></a>      dplyr<span class="sc">::</span><span class="fu">arrange</span>(dataTimestamp)</span>
<span id="cb3-62"><a href="step-one-read-and-stack.html#cb3-62"></a></span>
<span id="cb3-63"><a href="step-one-read-and-stack.html#cb3-63"></a>    <span class="co"># If device not initialized at midnight, keep eight days</span></span>
<span id="cb3-64"><a href="step-one-read-and-stack.html#cb3-64"></a>    <span class="cf">if</span>(<span class="fu">format</span>(start_date, <span class="st">&quot;%H:%M:%S&quot;</span>) <span class="sc">!=</span> <span class="st">&quot;00:00:00&quot;</span>) {</span>
<span id="cb3-65"><a href="step-one-read-and-stack.html#cb3-65"></a></span>
<span id="cb3-66"><a href="step-one-read-and-stack.html#cb3-66"></a>      days_to_keep <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span></span>
<span id="cb3-67"><a href="step-one-read-and-stack.html#cb3-67"></a></span>
<span id="cb3-68"><a href="step-one-read-and-stack.html#cb3-68"></a>    <span class="co"># Else, keep seven days</span></span>
<span id="cb3-69"><a href="step-one-read-and-stack.html#cb3-69"></a>    } <span class="cf">else</span> {</span>
<span id="cb3-70"><a href="step-one-read-and-stack.html#cb3-70"></a></span>
<span id="cb3-71"><a href="step-one-read-and-stack.html#cb3-71"></a>      days_to_keep <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">7</span></span>
<span id="cb3-72"><a href="step-one-read-and-stack.html#cb3-72"></a></span>
<span id="cb3-73"><a href="step-one-read-and-stack.html#cb3-73"></a>    }</span>
<span id="cb3-74"><a href="step-one-read-and-stack.html#cb3-74"></a></span>
<span id="cb3-75"><a href="step-one-read-and-stack.html#cb3-75"></a>    <span class="co"># Retain the first n days of data as set in days_to_keep parameter</span></span>
<span id="cb3-76"><a href="step-one-read-and-stack.html#cb3-76"></a>    agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-77"><a href="step-one-read-and-stack.html#cb3-77"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">ymd =</span> <span class="fu">format</span>(dataTimestamp, <span class="st">&quot;%Y%m%d&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb3-78"><a href="step-one-read-and-stack.html#cb3-78"></a>      dplyr<span class="sc">::</span><span class="fu">filter</span>(ymd <span class="sc">%in%</span> <span class="fu">unique</span>(ymd)[days_to_keep]) <span class="sc">%&gt;%</span></span>
<span id="cb3-79"><a href="step-one-read-and-stack.html#cb3-79"></a>      dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>ymd)</span>
<span id="cb3-80"><a href="step-one-read-and-stack.html#cb3-80"></a></span>
<span id="cb3-81"><a href="step-one-read-and-stack.html#cb3-81"></a>    <span class="co"># Add file_name vector</span></span>
<span id="cb3-82"><a href="step-one-read-and-stack.html#cb3-82"></a>    <span class="co"># This serves as the primary key for retrieving/binding participant metadata (e.g., age, sex) from the participant log to this data frame</span></span>
<span id="cb3-83"><a href="step-one-read-and-stack.html#cb3-83"></a>    agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-84"><a href="step-one-read-and-stack.html#cb3-84"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">file_name =</span> <span class="fu">basename</span>(ellipsis_arguments<span class="sc">$</span>file_path)) <span class="sc">%&gt;%</span></span>
<span id="cb3-85"><a href="step-one-read-and-stack.html#cb3-85"></a>      dplyr<span class="sc">::</span><span class="fu">relocate</span>(file_name)</span>
<span id="cb3-86"><a href="step-one-read-and-stack.html#cb3-86"></a></span>
<span id="cb3-87"><a href="step-one-read-and-stack.html#cb3-87"></a>    <span class="co"># Add empty vm vector</span></span>
<span id="cb3-88"><a href="step-one-read-and-stack.html#cb3-88"></a>    agd_data<span class="sc">$</span>vm <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb3-89"><a href="step-one-read-and-stack.html#cb3-89"></a></span>
<span id="cb3-90"><a href="step-one-read-and-stack.html#cb3-90"></a>    <span class="co"># Add empty filter vector</span></span>
<span id="cb3-91"><a href="step-one-read-and-stack.html#cb3-91"></a>    agd_data<span class="sc">$</span>filter <span class="ot">&lt;-</span> filter</span>
<span id="cb3-92"><a href="step-one-read-and-stack.html#cb3-92"></a></span>
<span id="cb3-93"><a href="step-one-read-and-stack.html#cb3-93"></a>    <span class="co"># Add day of week vector</span></span>
<span id="cb3-94"><a href="step-one-read-and-stack.html#cb3-94"></a>    agd_data<span class="sc">$</span>in_dow <span class="ot">&lt;-</span> <span class="fu">weekdays</span>(agd_data<span class="sc">$</span>dataTimestamp)</span>
<span id="cb3-95"><a href="step-one-read-and-stack.html#cb3-95"></a></span>
<span id="cb3-96"><a href="step-one-read-and-stack.html#cb3-96"></a>    <span class="co"># Add hour vector</span></span>
<span id="cb3-97"><a href="step-one-read-and-stack.html#cb3-97"></a>    agd_data<span class="sc">$</span>in_hour <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(agd_data<span class="sc">$</span>dataTimestamp, <span class="st">&quot;%H&quot;</span>))</span>
<span id="cb3-98"><a href="step-one-read-and-stack.html#cb3-98"></a></span>
<span id="cb3-99"><a href="step-one-read-and-stack.html#cb3-99"></a>    <span class="co"># Add minute vector</span></span>
<span id="cb3-100"><a href="step-one-read-and-stack.html#cb3-100"></a>    agd_data<span class="sc">$</span>in_minute <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(agd_data<span class="sc">$</span>dataTimestamp, <span class="st">&quot;%M&quot;</span>))</span>
<span id="cb3-101"><a href="step-one-read-and-stack.html#cb3-101"></a></span>
<span id="cb3-102"><a href="step-one-read-and-stack.html#cb3-102"></a>    <span class="co"># Add second vector</span></span>
<span id="cb3-103"><a href="step-one-read-and-stack.html#cb3-103"></a>    agd_data<span class="sc">$</span>in_second <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="fu">format</span>(agd_data<span class="sc">$</span>dataTimestamp, <span class="st">&quot;%S&quot;</span>))</span>
<span id="cb3-104"><a href="step-one-read-and-stack.html#cb3-104"></a></span>
<span id="cb3-105"><a href="step-one-read-and-stack.html#cb3-105"></a>    <span class="co"># Change dataTimestamp vector format and rename</span></span>
<span id="cb3-106"><a href="step-one-read-and-stack.html#cb3-106"></a>    agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-107"><a href="step-one-read-and-stack.html#cb3-107"></a>      dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">dataTimestamp =</span> <span class="fu">as.POSIXct</span>(<span class="fu">format</span>(dataTimestamp, <span class="st">&quot;%Y-%m-%d&quot;</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb3-108"><a href="step-one-read-and-stack.html#cb3-108"></a>      dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">in_date =</span> dataTimestamp)</span>
<span id="cb3-109"><a href="step-one-read-and-stack.html#cb3-109"></a></span>
<span id="cb3-110"><a href="step-one-read-and-stack.html#cb3-110"></a>    <span class="co"># Add observation vector with a count for each row</span></span>
<span id="cb3-111"><a href="step-one-read-and-stack.html#cb3-111"></a>    agd_data<span class="sc">$</span>obsn <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(agd_data)</span>
<span id="cb3-112"><a href="step-one-read-and-stack.html#cb3-112"></a></span>
<span id="cb3-113"><a href="step-one-read-and-stack.html#cb3-113"></a>    <span class="co"># Add day vector</span></span>
<span id="cb3-114"><a href="step-one-read-and-stack.html#cb3-114"></a>    agd_data<span class="sc">$</span>in_dayn <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb3-115"><a href="step-one-read-and-stack.html#cb3-115"></a>      <span class="fu">factor</span>(agd_data<span class="sc">$</span>in_date)</span>
<span id="cb3-116"><a href="step-one-read-and-stack.html#cb3-116"></a>    )</span>
<span id="cb3-117"><a href="step-one-read-and-stack.html#cb3-117"></a></span>
<span id="cb3-118"><a href="step-one-read-and-stack.html#cb3-118"></a>    <span class="co"># Create temporary time stamp vector</span></span>
<span id="cb3-119"><a href="step-one-read-and-stack.html#cb3-119"></a>    agd_data<span class="sc">$</span>time_stamp <span class="ot">&lt;-</span> <span class="fu">apply</span>(agd_data[<span class="fu">c</span>(<span class="st">&quot;in_hour&quot;</span>, <span class="st">&quot;in_minute&quot;</span>, <span class="st">&quot;in_second&quot;</span>)], <span class="dv">1</span>, <span class="cf">function</span>(x) <span class="fu">paste0</span>(stringr<span class="sc">::</span><span class="fu">str_pad</span>(x, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>), <span class="at">collapse =</span> <span class="st">&quot;:&quot;</span>))</span>
<span id="cb3-120"><a href="step-one-read-and-stack.html#cb3-120"></a></span>
<span id="cb3-121"><a href="step-one-read-and-stack.html#cb3-121"></a>    <span class="co"># Add day vector where day runs from noon to noon</span></span>
<span id="cb3-122"><a href="step-one-read-and-stack.html#cb3-122"></a>    agd_data<span class="sc">$</span>in_noon <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(agd_data), <span class="cf">function</span>(x) {</span>
<span id="cb3-123"><a href="step-one-read-and-stack.html#cb3-123"></a></span>
<span id="cb3-124"><a href="step-one-read-and-stack.html#cb3-124"></a>      <span class="cf">if</span>(agd_data<span class="sc">$</span>in_hour[x] <span class="sc">&gt;=</span> <span class="dv">12</span> <span class="sc">|</span> agd_data<span class="sc">$</span>time_stamp[x] <span class="sc">==</span> <span class="fu">paste0</span>(<span class="st">&quot;11:59:&quot;</span>, <span class="dv">60</span> <span class="sc">-</span> epoch_length)) {</span>
<span id="cb3-125"><a href="step-one-read-and-stack.html#cb3-125"></a></span>
<span id="cb3-126"><a href="step-one-read-and-stack.html#cb3-126"></a>        <span class="fu">return</span>(agd_data<span class="sc">$</span>in_dayn[x])</span>
<span id="cb3-127"><a href="step-one-read-and-stack.html#cb3-127"></a></span>
<span id="cb3-128"><a href="step-one-read-and-stack.html#cb3-128"></a>      } <span class="cf">else</span> {</span>
<span id="cb3-129"><a href="step-one-read-and-stack.html#cb3-129"></a></span>
<span id="cb3-130"><a href="step-one-read-and-stack.html#cb3-130"></a>        <span class="fu">return</span>(agd_data<span class="sc">$</span>in_dayn[x] <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb3-131"><a href="step-one-read-and-stack.html#cb3-131"></a></span>
<span id="cb3-132"><a href="step-one-read-and-stack.html#cb3-132"></a>      }</span>
<span id="cb3-133"><a href="step-one-read-and-stack.html#cb3-133"></a></span>
<span id="cb3-134"><a href="step-one-read-and-stack.html#cb3-134"></a>    })</span>
<span id="cb3-135"><a href="step-one-read-and-stack.html#cb3-135"></a></span>
<span id="cb3-136"><a href="step-one-read-and-stack.html#cb3-136"></a>    <span class="co"># Remove temporary time stamp vector</span></span>
<span id="cb3-137"><a href="step-one-read-and-stack.html#cb3-137"></a>    agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-138"><a href="step-one-read-and-stack.html#cb3-138"></a>      <span class="fu">select</span>(<span class="sc">-</span>time_stamp)</span>
<span id="cb3-139"><a href="step-one-read-and-stack.html#cb3-139"></a></span>
<span id="cb3-140"><a href="step-one-read-and-stack.html#cb3-140"></a>    <span class="co"># Add ActiGraph serial number vector</span></span>
<span id="cb3-141"><a href="step-one-read-and-stack.html#cb3-141"></a>    agd_data<span class="sc">$</span>actigraph <span class="ot">&lt;-</span> agd<span class="sc">$</span>settings<span class="sc">$</span>settingValue[agd<span class="sc">$</span>settings<span class="sc">$</span>settingName <span class="sc">==</span> <span class="st">&quot;deviceserial&quot;</span>]</span>
<span id="cb3-142"><a href="step-one-read-and-stack.html#cb3-142"></a></span>
<span id="cb3-143"><a href="step-one-read-and-stack.html#cb3-143"></a>    <span class="co"># If ActiGraph not initialized at midnight, remove data points collected at the same time on the first and last days</span></span>
<span id="cb3-144"><a href="step-one-read-and-stack.html#cb3-144"></a>    <span class="cf">if</span>(<span class="fu">length</span>(days_to_keep) <span class="sc">&gt;</span> <span class="dv">7</span>) {</span>
<span id="cb3-145"><a href="step-one-read-and-stack.html#cb3-145"></a></span>
<span id="cb3-146"><a href="step-one-read-and-stack.html#cb3-146"></a>      <span class="co"># Create a temporary hms vector</span></span>
<span id="cb3-147"><a href="step-one-read-and-stack.html#cb3-147"></a>      agd_data<span class="sc">$</span>hms <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb3-148"><a href="step-one-read-and-stack.html#cb3-148"></a>        agd_data<span class="sc">$</span>in_hour,</span>
<span id="cb3-149"><a href="step-one-read-and-stack.html#cb3-149"></a>        <span class="st">&quot;-&quot;</span>,</span>
<span id="cb3-150"><a href="step-one-read-and-stack.html#cb3-150"></a>        agd_data<span class="sc">$</span>in_minute,</span>
<span id="cb3-151"><a href="step-one-read-and-stack.html#cb3-151"></a>        <span class="st">&quot;-&quot;</span>,</span>
<span id="cb3-152"><a href="step-one-read-and-stack.html#cb3-152"></a>        agd_data<span class="sc">$</span>in_second</span>
<span id="cb3-153"><a href="step-one-read-and-stack.html#cb3-153"></a>      )</span>
<span id="cb3-154"><a href="step-one-read-and-stack.html#cb3-154"></a></span>
<span id="cb3-155"><a href="step-one-read-and-stack.html#cb3-155"></a>      <span class="co"># Find common hms values on the first and last days</span></span>
<span id="cb3-156"><a href="step-one-read-and-stack.html#cb3-156"></a>      common_hms <span class="ot">&lt;-</span> agd_data<span class="sc">$</span>hms[agd_data<span class="sc">$</span>in_dayn <span class="sc">==</span> <span class="fu">max</span>(agd_data<span class="sc">$</span>in_dayn)][agd_data<span class="sc">$</span>hms[agd_data<span class="sc">$</span>in_dayn <span class="sc">==</span> <span class="fu">max</span>(agd_data<span class="sc">$</span>in_dayn)] <span class="sc">%in%</span> agd_data<span class="sc">$</span>hms[agd_data<span class="sc">$</span>in_dayn <span class="sc">==</span> <span class="fu">min</span>(agd_data<span class="sc">$</span>in_dayn)]]</span>
<span id="cb3-157"><a href="step-one-read-and-stack.html#cb3-157"></a></span>
<span id="cb3-158"><a href="step-one-read-and-stack.html#cb3-158"></a>      <span class="co"># Identify row numbers for these common values</span></span>
<span id="cb3-159"><a href="step-one-read-and-stack.html#cb3-159"></a>      rows <span class="ot">&lt;-</span> <span class="fu">which</span>(agd_data<span class="sc">$</span>in_dayn <span class="sc">==</span> <span class="fu">max</span>(agd_data<span class="sc">$</span>in_dayn) <span class="sc">&amp;</span> agd_data<span class="sc">$</span>hms <span class="sc">%in%</span> common_hms)</span>
<span id="cb3-160"><a href="step-one-read-and-stack.html#cb3-160"></a></span>
<span id="cb3-161"><a href="step-one-read-and-stack.html#cb3-161"></a>      <span class="co"># Remove these rows and the hms vector</span></span>
<span id="cb3-162"><a href="step-one-read-and-stack.html#cb3-162"></a>      agd_data <span class="ot">&lt;-</span> agd_data <span class="sc">%&gt;%</span></span>
<span id="cb3-163"><a href="step-one-read-and-stack.html#cb3-163"></a>        dplyr<span class="sc">::</span><span class="fu">slice</span>(<span class="sc">-</span>rows) <span class="sc">%&gt;%</span></span>
<span id="cb3-164"><a href="step-one-read-and-stack.html#cb3-164"></a>        dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>hms)</span>
<span id="cb3-165"><a href="step-one-read-and-stack.html#cb3-165"></a></span>
<span id="cb3-166"><a href="step-one-read-and-stack.html#cb3-166"></a>    }</span>
<span id="cb3-167"><a href="step-one-read-and-stack.html#cb3-167"></a></span>
<span id="cb3-168"><a href="step-one-read-and-stack.html#cb3-168"></a>    <span class="co"># Return data</span></span>
<span id="cb3-169"><a href="step-one-read-and-stack.html#cb3-169"></a>    <span class="fu">return</span>(agd_data)</span>
<span id="cb3-170"><a href="step-one-read-and-stack.html#cb3-170"></a></span>
<span id="cb3-171"><a href="step-one-read-and-stack.html#cb3-171"></a>  <span class="co"># Else, return nothing</span></span>
<span id="cb3-172"><a href="step-one-read-and-stack.html#cb3-172"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-173"><a href="step-one-read-and-stack.html#cb3-173"></a></span>
<span id="cb3-174"><a href="step-one-read-and-stack.html#cb3-174"></a>    <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb3-175"><a href="step-one-read-and-stack.html#cb3-175"></a></span>
<span id="cb3-176"><a href="step-one-read-and-stack.html#cb3-176"></a>  }</span>
<span id="cb3-177"><a href="step-one-read-and-stack.html#cb3-177"></a></span>
<span id="cb3-178"><a href="step-one-read-and-stack.html#cb3-178"></a>}</span></code></pre></div>
</div>
</div>
<div id="vignette" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Vignette<a href="step-one-read-and-stack.html#vignette" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The code chunk below provides an example of how to execute <i>Step one</i> in R.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="step-one-read-and-stack.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import dependencies</span></span>
<span id="cb4-2"><a href="step-one-read-and-stack.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: actigraphr is a placeholder name for the R package</span></span>
<span id="cb4-3"><a href="step-one-read-and-stack.html#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(actigraphr)</span>
<span id="cb4-4"><a href="step-one-read-and-stack.html#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="step-one-read-and-stack.html#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Set path to .agd files</span></span>
<span id="cb4-6"><a href="step-one-read-and-stack.html#cb4-6" aria-hidden="true" tabindex="-1"></a>path <span class="ot">&lt;-</span> <span class="st">&quot;//f8prod02/SSPE_CHMS2/CHMS/Cycle07/ActivityMonitors/Data/CrossOver/Actigraph/&quot;</span></span>
<span id="cb4-7"><a href="step-one-read-and-stack.html#cb4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-8"><a href="step-one-read-and-stack.html#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Find all .agd file names with normal filtering (the &quot;A&quot; files)</span></span>
<span id="cb4-9"><a href="step-one-read-and-stack.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Note: if LFE-filtered files (the &quot;B&quot; files) are accidentally included, actigraphr will automatically detect and assign the correct filter</span></span>
<span id="cb4-10"><a href="step-one-read-and-stack.html#cb4-10" aria-hidden="true" tabindex="-1"></a>file_names <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb4-11"><a href="step-one-read-and-stack.html#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">path =</span> path, </span>
<span id="cb4-12"><a href="step-one-read-and-stack.html#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">pattern =</span> <span class="st">&quot;_A.agd&quot;</span></span>
<span id="cb4-13"><a href="step-one-read-and-stack.html#cb4-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="step-one-read-and-stack.html#cb4-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-15"><a href="step-one-read-and-stack.html#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector with full paths to all .agd files with normal filtering</span></span>
<span id="cb4-16"><a href="step-one-read-and-stack.html#cb4-16" aria-hidden="true" tabindex="-1"></a>file_paths <span class="ot">&lt;-</span> <span class="fu">paste0</span>(</span>
<span id="cb4-17"><a href="step-one-read-and-stack.html#cb4-17" aria-hidden="true" tabindex="-1"></a>  path, </span>
<span id="cb4-18"><a href="step-one-read-and-stack.html#cb4-18" aria-hidden="true" tabindex="-1"></a>  file_names</span>
<span id="cb4-19"><a href="step-one-read-and-stack.html#cb4-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-20"><a href="step-one-read-and-stack.html#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="step-one-read-and-stack.html#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and stack Actigraph files</span></span>
<span id="cb4-22"><a href="step-one-read-and-stack.html#cb4-22" aria-hidden="true" tabindex="-1"></a>paxraw <span class="ot">&lt;-</span> <span class="fu">get_agd_data</span>(</span>
<span id="cb4-23"><a href="step-one-read-and-stack.html#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">file_path =</span> file_paths,</span>
<span id="cb4-24"><a href="step-one-read-and-stack.html#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">method =</span> <span class="st">&quot;statcan&quot;</span>,</span>
<span id="cb4-25"><a href="step-one-read-and-stack.html#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">step =</span> <span class="dv">1</span>,</span>
<span id="cb4-26"><a href="step-one-read-and-stack.html#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">cpu_cores =</span> <span class="dv">4</span></span>
<span id="cb4-27"><a href="step-one-read-and-stack.html#cb4-27" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-28"><a href="step-one-read-and-stack.html#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="step-one-read-and-stack.html#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Export the data</span></span>
<span id="cb4-30"><a href="step-one-read-and-stack.html#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(</span>
<span id="cb4-31"><a href="step-one-read-and-stack.html#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">object =</span> paxraw,</span>
<span id="cb4-32"><a href="step-one-read-and-stack.html#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;paxraw.rds&quot;</span>,</span>
<span id="cb4-33"><a href="step-one-read-and-stack.html#cb4-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">compress =</span> <span class="st">&quot;xz&quot;</span></span>
<span id="cb4-34"><a href="step-one-read-and-stack.html#cb4-34" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="tests" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Tests<a href="step-one-read-and-stack.html#tests" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="equality-test-normal-filtered-data" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Equality test (normal-filtered data)<a href="step-one-read-and-stack.html#equality-test-normal-filtered-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this test, we compare the SAS and R versions of the <i>Step one</i> output (<code>paxraw</code>) for equality. We expect the outputs to be identical.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="step-one-read-and-stack.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import dependencies</span></span>
<span id="cb5-2"><a href="step-one-read-and-stack.html#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-3"><a href="step-one-read-and-stack.html#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb5-4"><a href="step-one-read-and-stack.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb5-5"><a href="step-one-read-and-stack.html#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb5-6"><a href="step-one-read-and-stack.html#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb5-7"><a href="step-one-read-and-stack.html#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="step-one-read-and-stack.html#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Import (pre-run) R output from step one</span></span>
<span id="cb5-9"><a href="step-one-read-and-stack.html#cb5-9" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(</span>
<span id="cb5-10"><a href="step-one-read-and-stack.html#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;data/paxraw.rds&quot;</span></span>
<span id="cb5-11"><a href="step-one-read-and-stack.html#cb5-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-12"><a href="step-one-read-and-stack.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="step-one-read-and-stack.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the file_name vector to the clinicid vector, and create empty vectors</span></span>
<span id="cb5-14"><a href="step-one-read-and-stack.html#cb5-14" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> paxraw_r <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="step-one-read-and-stack.html#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-16"><a href="step-one-read-and-stack.html#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;_A.agd|_B.agd&quot;</span>, <span class="st">&quot;&quot;</span>, file_name),</span>
<span id="cb5-17"><a href="step-one-read-and-stack.html#cb5-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">con_age =</span> <span class="cn">NA</span>,</span>
<span id="cb5-18"><a href="step-one-read-and-stack.html#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actical =</span> <span class="cn">NA</span>,</span>
<span id="cb5-19"><a href="step-one-read-and-stack.html#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">con_sex =</span> <span class="cn">NA</span></span>
<span id="cb5-20"><a href="step-one-read-and-stack.html#cb5-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="step-one-read-and-stack.html#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">clinicid =</span> file_name)</span>
<span id="cb5-22"><a href="step-one-read-and-stack.html#cb5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-23"><a href="step-one-read-and-stack.html#cb5-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename select elements in the clinicid vector</span></span>
<span id="cb5-24"><a href="step-one-read-and-stack.html#cb5-24" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> paxraw_r <span class="sc">%&gt;%</span></span>
<span id="cb5-25"><a href="step-one-read-and-stack.html#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-26"><a href="step-one-read-and-stack.html#cb5-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">clinicid =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-27"><a href="step-one-read-and-stack.html#cb5-27" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011186_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011186&quot;</span>,</span>
<span id="cb5-28"><a href="step-one-read-and-stack.html#cb5-28" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011189_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011189&quot;</span>,</span>
<span id="cb5-29"><a href="step-one-read-and-stack.html#cb5-29" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011206_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011206&quot;</span>,</span>
<span id="cb5-30"><a href="step-one-read-and-stack.html#cb5-30" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011207_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011207&quot;</span>,</span>
<span id="cb5-31"><a href="step-one-read-and-stack.html#cb5-31" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011208_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011208&quot;</span>,</span>
<span id="cb5-32"><a href="step-one-read-and-stack.html#cb5-32" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> clinicid</span>
<span id="cb5-33"><a href="step-one-read-and-stack.html#cb5-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-34"><a href="step-one-read-and-stack.html#cb5-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-35"><a href="step-one-read-and-stack.html#cb5-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-36"><a href="step-one-read-and-stack.html#cb5-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">clinicid =</span> <span class="fu">strsplit</span>(clinicid, <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-37"><a href="step-one-read-and-stack.html#cb5-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">map_chr</span>(., <span class="dv">1</span>)</span>
<span id="cb5-38"><a href="step-one-read-and-stack.html#cb5-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-39"><a href="step-one-read-and-stack.html#cb5-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-40"><a href="step-one-read-and-stack.html#cb5-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Rearrange rows</span></span>
<span id="cb5-41"><a href="step-one-read-and-stack.html#cb5-41" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> paxraw_r <span class="sc">%&gt;%</span></span>
<span id="cb5-42"><a href="step-one-read-and-stack.html#cb5-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(clinicid, in_dayn, in_hour, in_minute, in_second)</span>
<span id="cb5-43"><a href="step-one-read-and-stack.html#cb5-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-44"><a href="step-one-read-and-stack.html#cb5-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Recompute grouping vector for each unique minute</span></span>
<span id="cb5-45"><a href="step-one-read-and-stack.html#cb5-45" aria-hidden="true" tabindex="-1"></a>paxraw_r<span class="sc">$</span>grp <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb5-46"><a href="step-one-read-and-stack.html#cb5-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb5-47"><a href="step-one-read-and-stack.html#cb5-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb5-48"><a href="step-one-read-and-stack.html#cb5-48" aria-hidden="true" tabindex="-1"></a>      paxraw_r<span class="sc">$</span>clinicid,</span>
<span id="cb5-49"><a href="step-one-read-and-stack.html#cb5-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb5-50"><a href="step-one-read-and-stack.html#cb5-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">format</span>(paxraw_r<span class="sc">$</span>in_date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb5-51"><a href="step-one-read-and-stack.html#cb5-51" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb5-52"><a href="step-one-read-and-stack.html#cb5-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(paxraw_r<span class="sc">$</span>in_hour, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb5-53"><a href="step-one-read-and-stack.html#cb5-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb5-54"><a href="step-one-read-and-stack.html#cb5-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(paxraw_r<span class="sc">$</span>in_minute, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb5-55"><a href="step-one-read-and-stack.html#cb5-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-56"><a href="step-one-read-and-stack.html#cb5-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-57"><a href="step-one-read-and-stack.html#cb5-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-58"><a href="step-one-read-and-stack.html#cb5-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-59"><a href="step-one-read-and-stack.html#cb5-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Change filter to match what is in the SAS file</span></span>
<span id="cb5-60"><a href="step-one-read-and-stack.html#cb5-60" aria-hidden="true" tabindex="-1"></a>paxraw_r<span class="sc">$</span>filter <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb5-61"><a href="step-one-read-and-stack.html#cb5-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-62"><a href="step-one-read-and-stack.html#cb5-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Import participant master log</span></span>
<span id="cb5-63"><a href="step-one-read-and-stack.html#cb5-63" aria-hidden="true" tabindex="-1"></a>master_log <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(</span>
<span id="cb5-64"><a href="step-one-read-and-stack.html#cb5-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_file =</span> <span class="st">&quot;//f8prod02/chms_prerelease/Cycle07/Crossover_Studies/Activity_monitor_crossover/Participants/participants.sas7bdat&quot;</span></span>
<span id="cb5-65"><a href="step-one-read-and-stack.html#cb5-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-66"><a href="step-one-read-and-stack.html#cb5-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-67"><a href="step-one-read-and-stack.html#cb5-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a grid of master log vectors and clinic IDs to link</span></span>
<span id="cb5-68"><a href="step-one-read-and-stack.html#cb5-68" aria-hidden="true" tabindex="-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb5-69"><a href="step-one-read-and-stack.html#cb5-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">unique</span>(paxraw_r<span class="sc">$</span>clinicid),</span>
<span id="cb5-70"><a href="step-one-read-and-stack.html#cb5-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">vector =</span> <span class="fu">c</span>(<span class="st">&quot;con_age&quot;</span>, <span class="st">&quot;Actical&quot;</span>, <span class="st">&quot;con_sex&quot;</span>)</span>
<span id="cb5-71"><a href="step-one-read-and-stack.html#cb5-71" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-72"><a href="step-one-read-and-stack.html#cb5-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-73"><a href="step-one-read-and-stack.html#cb5-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate grid and link data</span></span>
<span id="cb5-74"><a href="step-one-read-and-stack.html#cb5-74" aria-hidden="true" tabindex="-1"></a>link_data <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(grid), <span class="cf">function</span>(x) {</span>
<span id="cb5-75"><a href="step-one-read-and-stack.html#cb5-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-76"><a href="step-one-read-and-stack.html#cb5-76" aria-hidden="true" tabindex="-1"></a>  paxraw_r[[grid<span class="sc">$</span>vector[x]]][<span class="fu">which</span>(paxraw_r<span class="sc">$</span>clinicid <span class="sc">==</span> grid<span class="sc">$</span>id[x])] <span class="ot">&lt;&lt;-</span> master_log[[grid<span class="sc">$</span>vector[x]]][<span class="fu">which</span>(master_log<span class="sc">$</span>CLINICID <span class="sc">==</span> grid<span class="sc">$</span>id[x])]</span>
<span id="cb5-77"><a href="step-one-read-and-stack.html#cb5-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-78"><a href="step-one-read-and-stack.html#cb5-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return nothing</span></span>
<span id="cb5-79"><a href="step-one-read-and-stack.html#cb5-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb5-80"><a href="step-one-read-and-stack.html#cb5-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-81"><a href="step-one-read-and-stack.html#cb5-81" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb5-82"><a href="step-one-read-and-stack.html#cb5-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-83"><a href="step-one-read-and-stack.html#cb5-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename and relocate select vectors</span></span>
<span id="cb5-84"><a href="step-one-read-and-stack.html#cb5-84" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> paxraw_r <span class="sc">%&gt;%</span></span>
<span id="cb5-85"><a href="step-one-read-and-stack.html#cb5-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">am_n31a =</span> Actical) <span class="sc">%&gt;%</span></span>
<span id="cb5-86"><a href="step-one-read-and-stack.html#cb5-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(con_age, <span class="at">.before =</span> actigraph)</span>
<span id="cb5-87"><a href="step-one-read-and-stack.html#cb5-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-88"><a href="step-one-read-and-stack.html#cb5-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Import SAS output from step one</span></span>
<span id="cb5-89"><a href="step-one-read-and-stack.html#cb5-89" aria-hidden="true" tabindex="-1"></a>paxraw_sas <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(</span>
<span id="cb5-90"><a href="step-one-read-and-stack.html#cb5-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_file =</span> <span class="st">&quot;//f8prod02/CHMS_prerelease/Cycle07/Crossover_Studies/Activity_monitor_crossover/SAS/Actigraph/Data/paxraw.sas7bdat&quot;</span></span>
<span id="cb5-91"><a href="step-one-read-and-stack.html#cb5-91" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-92"><a href="step-one-read-and-stack.html#cb5-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-93"><a href="step-one-read-and-stack.html#cb5-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for comparison (coerce all vectors to character vectors)</span></span>
<span id="cb5-94"><a href="step-one-read-and-stack.html#cb5-94" aria-hidden="true" tabindex="-1"></a>paxraw_sas <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_sas, as.character))</span>
<span id="cb5-95"><a href="step-one-read-and-stack.html#cb5-95" aria-hidden="true" tabindex="-1"></a>paxraw_sas <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_sas, str_trim))</span>
<span id="cb5-96"><a href="step-one-read-and-stack.html#cb5-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-97"><a href="step-one-read-and-stack.html#cb5-97" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_r, as.character))</span>
<span id="cb5-98"><a href="step-one-read-and-stack.html#cb5-98" aria-hidden="true" tabindex="-1"></a>paxraw_r <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_r, str_trim))</span>
<span id="cb5-99"><a href="step-one-read-and-stack.html#cb5-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-100"><a href="step-one-read-and-stack.html#cb5-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure all vector names are lowercase</span></span>
<span id="cb5-101"><a href="step-one-read-and-stack.html#cb5-101" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(paxraw_sas) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(paxraw_sas))</span>
<span id="cb5-102"><a href="step-one-read-and-stack.html#cb5-102" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(paxraw_r) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(paxraw_r))</span>
<span id="cb5-103"><a href="step-one-read-and-stack.html#cb5-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-104"><a href="step-one-read-and-stack.html#cb5-104" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare data</span></span>
<span id="cb5-105"><a href="step-one-read-and-stack.html#cb5-105" aria-hidden="true" tabindex="-1"></a>paxraw_sas_vs_paxraw_r <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb5-106"><a href="step-one-read-and-stack.html#cb5-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(</span>
<span id="cb5-107"><a href="step-one-read-and-stack.html#cb5-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">X =</span> <span class="fu">unique</span>(paxraw_r<span class="sc">$</span>clinicid),</span>
<span id="cb5-108"><a href="step-one-read-and-stack.html#cb5-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-109"><a href="step-one-read-and-stack.html#cb5-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-110"><a href="step-one-read-and-stack.html#cb5-110" aria-hidden="true" tabindex="-1"></a>      sas_results <span class="ot">&lt;-</span> paxraw_sas <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clinicid <span class="sc">==</span> x)</span>
<span id="cb5-111"><a href="step-one-read-and-stack.html#cb5-111" aria-hidden="true" tabindex="-1"></a>      r_results <span class="ot">&lt;-</span> paxraw_r <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clinicid <span class="sc">==</span> x)</span>
<span id="cb5-112"><a href="step-one-read-and-stack.html#cb5-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-113"><a href="step-one-read-and-stack.html#cb5-113" aria-hidden="true" tabindex="-1"></a>      results <span class="ot">&lt;-</span> <span class="fu">all.equal</span>(</span>
<span id="cb5-114"><a href="step-one-read-and-stack.html#cb5-114" aria-hidden="true" tabindex="-1"></a>        <span class="at">current =</span> sas_results,</span>
<span id="cb5-115"><a href="step-one-read-and-stack.html#cb5-115" aria-hidden="true" tabindex="-1"></a>        <span class="at">target =</span> r_results</span>
<span id="cb5-116"><a href="step-one-read-and-stack.html#cb5-116" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-117"><a href="step-one-read-and-stack.html#cb5-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-118"><a href="step-one-read-and-stack.html#cb5-118" aria-hidden="true" tabindex="-1"></a>      output <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb5-119"><a href="step-one-read-and-stack.html#cb5-119" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">Clinic ID</span><span class="st">`</span> <span class="ot">=</span> x,</span>
<span id="cb5-120"><a href="step-one-read-and-stack.html#cb5-120" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">Start date</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb5-121"><a href="step-one-read-and-stack.html#cb5-121" aria-hidden="true" tabindex="-1"></a>          r_results<span class="sc">$</span>in_date[<span class="dv">1</span>],</span>
<span id="cb5-122"><a href="step-one-read-and-stack.html#cb5-122" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot; &quot;</span>,</span>
<span id="cb5-123"><a href="step-one-read-and-stack.html#cb5-123" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(</span>
<span id="cb5-124"><a href="step-one-read-and-stack.html#cb5-124" aria-hidden="true" tabindex="-1"></a>            <span class="fu">c</span>(</span>
<span id="cb5-125"><a href="step-one-read-and-stack.html#cb5-125" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_hour[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb5-126"><a href="step-one-read-and-stack.html#cb5-126" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_minute[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb5-127"><a href="step-one-read-and-stack.html#cb5-127" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_second[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb5-128"><a href="step-one-read-and-stack.html#cb5-128" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb5-129"><a href="step-one-read-and-stack.html#cb5-129" aria-hidden="true" tabindex="-1"></a>            <span class="at">collapse =</span> <span class="st">&quot;:&quot;</span></span>
<span id="cb5-130"><a href="step-one-read-and-stack.html#cb5-130" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb5-131"><a href="step-one-read-and-stack.html#cb5-131" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb5-132"><a href="step-one-read-and-stack.html#cb5-132" aria-hidden="true" tabindex="-1"></a>        <span class="at">Differences =</span> <span class="fu">ifelse</span>(</span>
<span id="cb5-133"><a href="step-one-read-and-stack.html#cb5-133" aria-hidden="true" tabindex="-1"></a>          <span class="at">test =</span> <span class="fu">isTRUE</span>(results),</span>
<span id="cb5-134"><a href="step-one-read-and-stack.html#cb5-134" aria-hidden="true" tabindex="-1"></a>          <span class="at">yes =</span> <span class="st">&quot;None&quot;</span>,</span>
<span id="cb5-135"><a href="step-one-read-and-stack.html#cb5-135" aria-hidden="true" tabindex="-1"></a>          <span class="at">no =</span> <span class="fu">paste0</span>(results, <span class="at">collapse =</span> <span class="st">&quot;; &quot;</span>)</span>
<span id="cb5-136"><a href="step-one-read-and-stack.html#cb5-136" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb5-137"><a href="step-one-read-and-stack.html#cb5-137" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-138"><a href="step-one-read-and-stack.html#cb5-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-139"><a href="step-one-read-and-stack.html#cb5-139" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb5-140"><a href="step-one-read-and-stack.html#cb5-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-141"><a href="step-one-read-and-stack.html#cb5-141" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb5-142"><a href="step-one-read-and-stack.html#cb5-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-143"><a href="step-one-read-and-stack.html#cb5-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Render results</span></span>
<span id="cb5-144"><a href="step-one-read-and-stack.html#cb5-144" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb5-145"><a href="step-one-read-and-stack.html#cb5-145" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> paxraw_sas_vs_paxraw_r,</span>
<span id="cb5-146"><a href="step-one-read-and-stack.html#cb5-146" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Results from the test of equality in step one outputs from the Crossover study (SAS vs. R).&quot;</span></span>
<span id="cb5-147"><a href="step-one-read-and-stack.html#cb5-147" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb5-148"><a href="step-one-read-and-stack.html#cb5-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(</span>
<span id="cb5-149"><a href="step-one-read-and-stack.html#cb5-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-150"><a href="step-one-read-and-stack.html#cb5-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(</span>
<span id="cb5-151"><a href="step-one-read-and-stack.html#cb5-151" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;striped&quot;</span>,</span>
<span id="cb5-152"><a href="step-one-read-and-stack.html#cb5-152" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;hover&quot;</span></span>
<span id="cb5-153"><a href="step-one-read-and-stack.html#cb5-153" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb5-154"><a href="step-one-read-and-stack.html#cb5-154" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-155"><a href="step-one-read-and-stack.html#cb5-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb5-156"><a href="step-one-read-and-stack.html#cb5-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">1</span>, </span>
<span id="cb5-157"><a href="step-one-read-and-stack.html#cb5-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="st">&quot;15%&quot;</span></span>
<span id="cb5-158"><a href="step-one-read-and-stack.html#cb5-158" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-159"><a href="step-one-read-and-stack.html#cb5-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb5-160"><a href="step-one-read-and-stack.html#cb5-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">2</span>, </span>
<span id="cb5-161"><a href="step-one-read-and-stack.html#cb5-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="st">&quot;25%&quot;</span></span>
<span id="cb5-162"><a href="step-one-read-and-stack.html#cb5-162" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-163"><a href="step-one-read-and-stack.html#cb5-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb5-164"><a href="step-one-read-and-stack.html#cb5-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">3</span>, </span>
<span id="cb5-165"><a href="step-one-read-and-stack.html#cb5-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">background =</span> <span class="fu">ifelse</span>(</span>
<span id="cb5-166"><a href="step-one-read-and-stack.html#cb5-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">test =</span> paxraw_sas_vs_paxraw_r<span class="sc">$</span>Differences <span class="sc">==</span> <span class="st">&quot;None&quot;</span>, </span>
<span id="cb5-167"><a href="step-one-read-and-stack.html#cb5-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">&quot;#caffbf&quot;</span>, </span>
<span id="cb5-168"><a href="step-one-read-and-stack.html#cb5-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> <span class="fu">ifelse</span>(</span>
<span id="cb5-169"><a href="step-one-read-and-stack.html#cb5-169" aria-hidden="true" tabindex="-1"></a>        <span class="at">test =</span> <span class="fu">str_detect</span>(paxraw_sas_vs_paxraw_r<span class="sc">$</span>Differences, <span class="st">&quot;in_dayn&quot;</span>),</span>
<span id="cb5-170"><a href="step-one-read-and-stack.html#cb5-170" aria-hidden="true" tabindex="-1"></a>        <span class="at">yes =</span> <span class="st">&quot;#ffadad&quot;</span>,</span>
<span id="cb5-171"><a href="step-one-read-and-stack.html#cb5-171" aria-hidden="true" tabindex="-1"></a>        <span class="at">no =</span> <span class="st">&quot;#fdffb6&quot;</span></span>
<span id="cb5-172"><a href="step-one-read-and-stack.html#cb5-172" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb5-173"><a href="step-one-read-and-stack.html#cb5-173" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb5-174"><a href="step-one-read-and-stack.html#cb5-174" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb5-175"><a href="step-one-read-and-stack.html#cb5-175" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><br></p>
<div id="results" class="section level4 hasAnchor" number="1.6.1.1">
<h4><span class="header-section-number">1.6.1.1</span> Results<a href="step-one-read-and-stack.html#results" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-13">Table 1.3: </span>Results from the test of equality in step one outputs from the Crossover study (SAS vs. R).
</caption>
<thead>
<tr>
<th style="text-align:left;">
Clinic ID
</th>
<th style="text-align:left;">
Start date
</th>
<th style="text-align:left;">
Differences
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 15%; ">
71011111
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011112
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011113
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011114
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011115
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011116
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011117
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011118
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011120
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011121
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011122
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011123
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011124
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011125
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011126
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011127
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 51 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011128
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011129
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011130
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011132
</td>
<td style="text-align:left;width: 25%; ">
2021-06-10 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011133
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011134
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011135
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011136
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011137
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011138
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 24 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011139
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 30 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011140
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011141
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011142
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011143
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 15 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011144
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011145
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011150
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011151
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011152
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011153
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011154
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011155
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011156
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011157
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011158
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011159
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011160
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011161
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 7 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011162
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 4 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011163
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011164
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011165
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011166
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011167
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011168
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011169
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011170
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011171
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011172
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 6 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011173
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 11 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011174
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011175
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011176
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011177
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011178
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011179
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011180
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011181
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 79 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011182
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 3 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011184
</td>
<td style="text-align:left;width: 25%; ">
2021-05-30 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 21 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011185
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011186
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011187
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011188
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 3 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011189
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011191
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011192
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 10 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011193
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011194
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011195
</td>
<td style="text-align:left;width: 25%; ">
2021-08-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011196
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 10 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011197
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 5 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011199
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011203
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011204
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011205
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 2 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011206
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011207
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 5 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011208
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011209
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011210
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011211
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011212
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011213
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011214
</td>
<td style="text-align:left;width: 25%; ">
2022-01-18 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011216
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011217
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011186
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 2 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011189
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011206
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011207
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target; Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011208
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches
</td>
</tr>
</tbody>
</table>
</div>
<div id="interpretation" class="section level4 hasAnchor" number="1.6.1.2">
<h4><span class="header-section-number">1.6.1.2</span> Interpretation<a href="step-one-read-and-stack.html#interpretation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><span style="background: #caffbf;">64.6%</span> of cases in the SAS and R versions of the <i>Step one</i> output (<code>paxraw</code>) are <span style="background: #caffbf;">identical</span>. <span style="background: #fdffb6;">22.2%</span> of cases have <span style="background: #fdffb6;">trivial</span> discrepancies. <span style="background: #ffadad;">13.1%</span> of cases have <span style="background: #ffadad;">non-trivial</span> discrepancies.</p>
<p>The discrepancies are discussed in the <a href="step-one-read-and-stack.html#step-one-issues">Issues section</a>.</p>
</div>
</div>
<div id="equality-test-lfe-filtered-data" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> Equality test (LFE-filtered data)<a href="step-one-read-and-stack.html#equality-test-lfe-filtered-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this test, we compare the SAS and R versions of the <i>Step one</i> output (<code>paxraw</code>) for equality. We expect the outputs to be identical.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="step-one-read-and-stack.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import dependencies</span></span>
<span id="cb6-2"><a href="step-one-read-and-stack.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb6-3"><a href="step-one-read-and-stack.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb6-4"><a href="step-one-read-and-stack.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb6-5"><a href="step-one-read-and-stack.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb6-6"><a href="step-one-read-and-stack.html#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb6-7"><a href="step-one-read-and-stack.html#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="step-one-read-and-stack.html#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Import (pre-run) R output from step one</span></span>
<span id="cb6-9"><a href="step-one-read-and-stack.html#cb6-9" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(</span>
<span id="cb6-10"><a href="step-one-read-and-stack.html#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">&quot;data/paxraw-lfe.rds&quot;</span></span>
<span id="cb6-11"><a href="step-one-read-and-stack.html#cb6-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-12"><a href="step-one-read-and-stack.html#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="step-one-read-and-stack.html#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the file_name vector to the clinicid vector, and create empty vectors</span></span>
<span id="cb6-14"><a href="step-one-read-and-stack.html#cb6-14" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> paxraw_lfe_r <span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="step-one-read-and-stack.html#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-16"><a href="step-one-read-and-stack.html#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">file_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;_A.agd|_B.agd&quot;</span>, <span class="st">&quot;&quot;</span>, file_name),</span>
<span id="cb6-17"><a href="step-one-read-and-stack.html#cb6-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">con_age =</span> <span class="cn">NA</span>,</span>
<span id="cb6-18"><a href="step-one-read-and-stack.html#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Actical =</span> <span class="cn">NA</span>,</span>
<span id="cb6-19"><a href="step-one-read-and-stack.html#cb6-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">con_sex =</span> <span class="cn">NA</span></span>
<span id="cb6-20"><a href="step-one-read-and-stack.html#cb6-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-21"><a href="step-one-read-and-stack.html#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">clinicid =</span> file_name)</span>
<span id="cb6-22"><a href="step-one-read-and-stack.html#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="step-one-read-and-stack.html#cb6-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename select elements in the clinicid vector</span></span>
<span id="cb6-24"><a href="step-one-read-and-stack.html#cb6-24" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> paxraw_lfe_r <span class="sc">%&gt;%</span></span>
<span id="cb6-25"><a href="step-one-read-and-stack.html#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-26"><a href="step-one-read-and-stack.html#cb6-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">clinicid =</span> <span class="fu">case_when</span>(</span>
<span id="cb6-27"><a href="step-one-read-and-stack.html#cb6-27" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011186_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011186&quot;</span>,</span>
<span id="cb6-28"><a href="step-one-read-and-stack.html#cb6-28" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011189_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011189&quot;</span>,</span>
<span id="cb6-29"><a href="step-one-read-and-stack.html#cb6-29" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011206_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011206&quot;</span>,</span>
<span id="cb6-30"><a href="step-one-read-and-stack.html#cb6-30" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011207_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011207&quot;</span>,</span>
<span id="cb6-31"><a href="step-one-read-and-stack.html#cb6-31" aria-hidden="true" tabindex="-1"></a>      clinicid <span class="sc">==</span> <span class="st">&quot;71011208_2&quot;</span> <span class="sc">~</span> <span class="st">&quot;72011208&quot;</span>,</span>
<span id="cb6-32"><a href="step-one-read-and-stack.html#cb6-32" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> clinicid</span>
<span id="cb6-33"><a href="step-one-read-and-stack.html#cb6-33" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-34"><a href="step-one-read-and-stack.html#cb6-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-35"><a href="step-one-read-and-stack.html#cb6-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-36"><a href="step-one-read-and-stack.html#cb6-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">clinicid =</span> <span class="fu">strsplit</span>(clinicid, <span class="st">&quot;_&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-37"><a href="step-one-read-and-stack.html#cb6-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">map_chr</span>(., <span class="dv">1</span>)</span>
<span id="cb6-38"><a href="step-one-read-and-stack.html#cb6-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-39"><a href="step-one-read-and-stack.html#cb6-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-40"><a href="step-one-read-and-stack.html#cb6-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Rearrange rows</span></span>
<span id="cb6-41"><a href="step-one-read-and-stack.html#cb6-41" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> paxraw_lfe_r <span class="sc">%&gt;%</span></span>
<span id="cb6-42"><a href="step-one-read-and-stack.html#cb6-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(clinicid, in_dayn, in_hour, in_minute, in_second)</span>
<span id="cb6-43"><a href="step-one-read-and-stack.html#cb6-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-44"><a href="step-one-read-and-stack.html#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Recompute grouping vector for each unique minute</span></span>
<span id="cb6-45"><a href="step-one-read-and-stack.html#cb6-45" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r<span class="sc">$</span>grp <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(</span>
<span id="cb6-46"><a href="step-one-read-and-stack.html#cb6-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">factor</span>(</span>
<span id="cb6-47"><a href="step-one-read-and-stack.html#cb6-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb6-48"><a href="step-one-read-and-stack.html#cb6-48" aria-hidden="true" tabindex="-1"></a>      paxraw_lfe_r<span class="sc">$</span>clinicid,</span>
<span id="cb6-49"><a href="step-one-read-and-stack.html#cb6-49" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb6-50"><a href="step-one-read-and-stack.html#cb6-50" aria-hidden="true" tabindex="-1"></a>      <span class="fu">format</span>(paxraw_lfe_r<span class="sc">$</span>in_date, <span class="st">&quot;%Y%m%d&quot;</span>),</span>
<span id="cb6-51"><a href="step-one-read-and-stack.html#cb6-51" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb6-52"><a href="step-one-read-and-stack.html#cb6-52" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(paxraw_lfe_r<span class="sc">$</span>in_hour, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb6-53"><a href="step-one-read-and-stack.html#cb6-53" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;-&quot;</span>,</span>
<span id="cb6-54"><a href="step-one-read-and-stack.html#cb6-54" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_pad</span>(paxraw_lfe_r<span class="sc">$</span>in_minute, <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb6-55"><a href="step-one-read-and-stack.html#cb6-55" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-56"><a href="step-one-read-and-stack.html#cb6-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-57"><a href="step-one-read-and-stack.html#cb6-57" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-58"><a href="step-one-read-and-stack.html#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="step-one-read-and-stack.html#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Change filter to match what is in the SAS file</span></span>
<span id="cb6-60"><a href="step-one-read-and-stack.html#cb6-60" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r<span class="sc">$</span>filter <span class="ot">&lt;-</span> <span class="st">&quot;_LFE&quot;</span></span>
<span id="cb6-61"><a href="step-one-read-and-stack.html#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="step-one-read-and-stack.html#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Import participant master log</span></span>
<span id="cb6-63"><a href="step-one-read-and-stack.html#cb6-63" aria-hidden="true" tabindex="-1"></a>master_log <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(</span>
<span id="cb6-64"><a href="step-one-read-and-stack.html#cb6-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_file =</span> <span class="st">&quot;//f8prod02/chms_prerelease/Cycle07/Crossover_Studies/Activity_monitor_crossover/Participants/participants.sas7bdat&quot;</span></span>
<span id="cb6-65"><a href="step-one-read-and-stack.html#cb6-65" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-66"><a href="step-one-read-and-stack.html#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="step-one-read-and-stack.html#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a grid of master log vectors and clinic IDs to link</span></span>
<span id="cb6-68"><a href="step-one-read-and-stack.html#cb6-68" aria-hidden="true" tabindex="-1"></a>grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb6-69"><a href="step-one-read-and-stack.html#cb6-69" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="fu">unique</span>(paxraw_lfe_r<span class="sc">$</span>clinicid),</span>
<span id="cb6-70"><a href="step-one-read-and-stack.html#cb6-70" aria-hidden="true" tabindex="-1"></a>  <span class="at">vector =</span> <span class="fu">c</span>(<span class="st">&quot;con_age&quot;</span>, <span class="st">&quot;Actical&quot;</span>, <span class="st">&quot;con_sex&quot;</span>)</span>
<span id="cb6-71"><a href="step-one-read-and-stack.html#cb6-71" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-72"><a href="step-one-read-and-stack.html#cb6-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-73"><a href="step-one-read-and-stack.html#cb6-73" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate grid and link data</span></span>
<span id="cb6-74"><a href="step-one-read-and-stack.html#cb6-74" aria-hidden="true" tabindex="-1"></a>link_data <span class="ot">&lt;-</span> <span class="fu">sapply</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(grid), <span class="cf">function</span>(x) {</span>
<span id="cb6-75"><a href="step-one-read-and-stack.html#cb6-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-76"><a href="step-one-read-and-stack.html#cb6-76" aria-hidden="true" tabindex="-1"></a>  paxraw_lfe_r[[grid<span class="sc">$</span>vector[x]]][<span class="fu">which</span>(paxraw_lfe_r<span class="sc">$</span>clinicid <span class="sc">==</span> grid<span class="sc">$</span>id[x])] <span class="ot">&lt;&lt;-</span> master_log[[grid<span class="sc">$</span>vector[x]]][<span class="fu">which</span>(master_log<span class="sc">$</span>CLINICID <span class="sc">==</span> grid<span class="sc">$</span>id[x])]</span>
<span id="cb6-77"><a href="step-one-read-and-stack.html#cb6-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-78"><a href="step-one-read-and-stack.html#cb6-78" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Return nothing</span></span>
<span id="cb6-79"><a href="step-one-read-and-stack.html#cb6-79" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="cn">NULL</span>)</span>
<span id="cb6-80"><a href="step-one-read-and-stack.html#cb6-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-81"><a href="step-one-read-and-stack.html#cb6-81" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-82"><a href="step-one-read-and-stack.html#cb6-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-83"><a href="step-one-read-and-stack.html#cb6-83" aria-hidden="true" tabindex="-1"></a><span class="co"># Rename and relocate select vectors</span></span>
<span id="cb6-84"><a href="step-one-read-and-stack.html#cb6-84" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> paxraw_lfe_r <span class="sc">%&gt;%</span></span>
<span id="cb6-85"><a href="step-one-read-and-stack.html#cb6-85" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">am_n31a =</span> Actical) <span class="sc">%&gt;%</span></span>
<span id="cb6-86"><a href="step-one-read-and-stack.html#cb6-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">relocate</span>(con_age, <span class="at">.before =</span> actigraph)</span>
<span id="cb6-87"><a href="step-one-read-and-stack.html#cb6-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-88"><a href="step-one-read-and-stack.html#cb6-88" aria-hidden="true" tabindex="-1"></a><span class="co"># Import SAS output from step one</span></span>
<span id="cb6-89"><a href="step-one-read-and-stack.html#cb6-89" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_sas <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(</span>
<span id="cb6-90"><a href="step-one-read-and-stack.html#cb6-90" aria-hidden="true" tabindex="-1"></a>  <span class="at">data_file =</span> <span class="st">&quot;//f8prod02/CHMS_prerelease/Cycle07/Crossover_Studies/Activity_monitor_crossover/SAS/Actigraph/Data/paxraw_lfe.sas7bdat&quot;</span></span>
<span id="cb6-91"><a href="step-one-read-and-stack.html#cb6-91" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-92"><a href="step-one-read-and-stack.html#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-93"><a href="step-one-read-and-stack.html#cb6-93" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data for comparison (coerce all vectors to character vectors)</span></span>
<span id="cb6-94"><a href="step-one-read-and-stack.html#cb6-94" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_sas <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_lfe_sas, as.character))</span>
<span id="cb6-95"><a href="step-one-read-and-stack.html#cb6-95" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_sas <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_lfe_sas, str_trim))</span>
<span id="cb6-96"><a href="step-one-read-and-stack.html#cb6-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-97"><a href="step-one-read-and-stack.html#cb6-97" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_lfe_r, as.character))</span>
<span id="cb6-98"><a href="step-one-read-and-stack.html#cb6-98" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_r <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(<span class="fu">lapply</span>(paxraw_lfe_r, str_trim))</span>
<span id="cb6-99"><a href="step-one-read-and-stack.html#cb6-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-100"><a href="step-one-read-and-stack.html#cb6-100" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure all vector names are lowercase</span></span>
<span id="cb6-101"><a href="step-one-read-and-stack.html#cb6-101" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(paxraw_lfe_sas) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(paxraw_lfe_sas))</span>
<span id="cb6-102"><a href="step-one-read-and-stack.html#cb6-102" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(paxraw_lfe_r) <span class="ot">&lt;-</span> <span class="fu">tolower</span>(<span class="fu">names</span>(paxraw_lfe_r))</span>
<span id="cb6-103"><a href="step-one-read-and-stack.html#cb6-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-104"><a href="step-one-read-and-stack.html#cb6-104" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare data</span></span>
<span id="cb6-105"><a href="step-one-read-and-stack.html#cb6-105" aria-hidden="true" tabindex="-1"></a>paxraw_lfe_sas_vs_paxraw_lfe_r <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb6-106"><a href="step-one-read-and-stack.html#cb6-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">lapply</span>(</span>
<span id="cb6-107"><a href="step-one-read-and-stack.html#cb6-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">X =</span> <span class="fu">unique</span>(paxraw_lfe_r<span class="sc">$</span>clinicid),</span>
<span id="cb6-108"><a href="step-one-read-and-stack.html#cb6-108" aria-hidden="true" tabindex="-1"></a>    <span class="at">FUN =</span> <span class="cf">function</span>(x) {</span>
<span id="cb6-109"><a href="step-one-read-and-stack.html#cb6-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-110"><a href="step-one-read-and-stack.html#cb6-110" aria-hidden="true" tabindex="-1"></a>      sas_results <span class="ot">&lt;-</span> paxraw_lfe_sas <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clinicid <span class="sc">==</span> x)</span>
<span id="cb6-111"><a href="step-one-read-and-stack.html#cb6-111" aria-hidden="true" tabindex="-1"></a>      r_results <span class="ot">&lt;-</span> paxraw_lfe_r <span class="sc">%&gt;%</span> <span class="fu">filter</span>(clinicid <span class="sc">==</span> x)</span>
<span id="cb6-112"><a href="step-one-read-and-stack.html#cb6-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-113"><a href="step-one-read-and-stack.html#cb6-113" aria-hidden="true" tabindex="-1"></a>      results <span class="ot">&lt;-</span> <span class="fu">all.equal</span>(</span>
<span id="cb6-114"><a href="step-one-read-and-stack.html#cb6-114" aria-hidden="true" tabindex="-1"></a>        <span class="at">current =</span> sas_results,</span>
<span id="cb6-115"><a href="step-one-read-and-stack.html#cb6-115" aria-hidden="true" tabindex="-1"></a>        <span class="at">target =</span> r_results</span>
<span id="cb6-116"><a href="step-one-read-and-stack.html#cb6-116" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-117"><a href="step-one-read-and-stack.html#cb6-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-118"><a href="step-one-read-and-stack.html#cb6-118" aria-hidden="true" tabindex="-1"></a>      output <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb6-119"><a href="step-one-read-and-stack.html#cb6-119" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">Clinic ID</span><span class="st">`</span> <span class="ot">=</span> x,</span>
<span id="cb6-120"><a href="step-one-read-and-stack.html#cb6-120" aria-hidden="true" tabindex="-1"></a>        <span class="st">`</span><span class="at">Start date</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">paste0</span>(</span>
<span id="cb6-121"><a href="step-one-read-and-stack.html#cb6-121" aria-hidden="true" tabindex="-1"></a>          r_results<span class="sc">$</span>in_date[<span class="dv">1</span>],</span>
<span id="cb6-122"><a href="step-one-read-and-stack.html#cb6-122" aria-hidden="true" tabindex="-1"></a>          <span class="st">&quot; &quot;</span>,</span>
<span id="cb6-123"><a href="step-one-read-and-stack.html#cb6-123" aria-hidden="true" tabindex="-1"></a>          <span class="fu">paste0</span>(</span>
<span id="cb6-124"><a href="step-one-read-and-stack.html#cb6-124" aria-hidden="true" tabindex="-1"></a>            <span class="fu">c</span>(</span>
<span id="cb6-125"><a href="step-one-read-and-stack.html#cb6-125" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_hour[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb6-126"><a href="step-one-read-and-stack.html#cb6-126" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_minute[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>),</span>
<span id="cb6-127"><a href="step-one-read-and-stack.html#cb6-127" aria-hidden="true" tabindex="-1"></a>              <span class="fu">str_pad</span>(r_results<span class="sc">$</span>in_second[<span class="dv">1</span>], <span class="at">width =</span> <span class="dv">2</span>, <span class="at">pad =</span> <span class="dv">0</span>)</span>
<span id="cb6-128"><a href="step-one-read-and-stack.html#cb6-128" aria-hidden="true" tabindex="-1"></a>            ),</span>
<span id="cb6-129"><a href="step-one-read-and-stack.html#cb6-129" aria-hidden="true" tabindex="-1"></a>            <span class="at">collapse =</span> <span class="st">&quot;:&quot;</span></span>
<span id="cb6-130"><a href="step-one-read-and-stack.html#cb6-130" aria-hidden="true" tabindex="-1"></a>          )</span>
<span id="cb6-131"><a href="step-one-read-and-stack.html#cb6-131" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb6-132"><a href="step-one-read-and-stack.html#cb6-132" aria-hidden="true" tabindex="-1"></a>        <span class="at">Differences =</span> <span class="fu">ifelse</span>(</span>
<span id="cb6-133"><a href="step-one-read-and-stack.html#cb6-133" aria-hidden="true" tabindex="-1"></a>          <span class="at">test =</span> <span class="fu">isTRUE</span>(results),</span>
<span id="cb6-134"><a href="step-one-read-and-stack.html#cb6-134" aria-hidden="true" tabindex="-1"></a>          <span class="at">yes =</span> <span class="st">&quot;None&quot;</span>,</span>
<span id="cb6-135"><a href="step-one-read-and-stack.html#cb6-135" aria-hidden="true" tabindex="-1"></a>          <span class="at">no =</span> <span class="fu">paste0</span>(results, <span class="at">collapse =</span> <span class="st">&quot;; &quot;</span>)</span>
<span id="cb6-136"><a href="step-one-read-and-stack.html#cb6-136" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-137"><a href="step-one-read-and-stack.html#cb6-137" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-138"><a href="step-one-read-and-stack.html#cb6-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-139"><a href="step-one-read-and-stack.html#cb6-139" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-140"><a href="step-one-read-and-stack.html#cb6-140" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-141"><a href="step-one-read-and-stack.html#cb6-141" aria-hidden="true" tabindex="-1"></a>) </span>
<span id="cb6-142"><a href="step-one-read-and-stack.html#cb6-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-143"><a href="step-one-read-and-stack.html#cb6-143" aria-hidden="true" tabindex="-1"></a><span class="co"># Render results</span></span>
<span id="cb6-144"><a href="step-one-read-and-stack.html#cb6-144" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="cb6-145"><a href="step-one-read-and-stack.html#cb6-145" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> paxraw_lfe_sas_vs_paxraw_lfe_r,</span>
<span id="cb6-146"><a href="step-one-read-and-stack.html#cb6-146" aria-hidden="true" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&quot;Results from the test of equality in step one outputs from the Crossover study (SAS vs. R).&quot;</span></span>
<span id="cb6-147"><a href="step-one-read-and-stack.html#cb6-147" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb6-148"><a href="step-one-read-and-stack.html#cb6-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(</span>
<span id="cb6-149"><a href="step-one-read-and-stack.html#cb6-149" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-150"><a href="step-one-read-and-stack.html#cb6-150" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(</span>
<span id="cb6-151"><a href="step-one-read-and-stack.html#cb6-151" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;striped&quot;</span>,</span>
<span id="cb6-152"><a href="step-one-read-and-stack.html#cb6-152" aria-hidden="true" tabindex="-1"></a>      <span class="st">&quot;hover&quot;</span></span>
<span id="cb6-153"><a href="step-one-read-and-stack.html#cb6-153" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-154"><a href="step-one-read-and-stack.html#cb6-154" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-155"><a href="step-one-read-and-stack.html#cb6-155" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb6-156"><a href="step-one-read-and-stack.html#cb6-156" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">1</span>, </span>
<span id="cb6-157"><a href="step-one-read-and-stack.html#cb6-157" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="st">&quot;15%&quot;</span></span>
<span id="cb6-158"><a href="step-one-read-and-stack.html#cb6-158" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-159"><a href="step-one-read-and-stack.html#cb6-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb6-160"><a href="step-one-read-and-stack.html#cb6-160" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">2</span>, </span>
<span id="cb6-161"><a href="step-one-read-and-stack.html#cb6-161" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="st">&quot;25%&quot;</span></span>
<span id="cb6-162"><a href="step-one-read-and-stack.html#cb6-162" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-163"><a href="step-one-read-and-stack.html#cb6-163" aria-hidden="true" tabindex="-1"></a>  <span class="fu">column_spec</span>(</span>
<span id="cb6-164"><a href="step-one-read-and-stack.html#cb6-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">column =</span> <span class="dv">3</span>, </span>
<span id="cb6-165"><a href="step-one-read-and-stack.html#cb6-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">background =</span> <span class="fu">ifelse</span>(</span>
<span id="cb6-166"><a href="step-one-read-and-stack.html#cb6-166" aria-hidden="true" tabindex="-1"></a>      <span class="at">test =</span> paxraw_lfe_sas_vs_paxraw_lfe_r<span class="sc">$</span>Differences <span class="sc">==</span> <span class="st">&quot;None&quot;</span>, </span>
<span id="cb6-167"><a href="step-one-read-and-stack.html#cb6-167" aria-hidden="true" tabindex="-1"></a>      <span class="at">yes =</span> <span class="st">&quot;#caffbf&quot;</span>, </span>
<span id="cb6-168"><a href="step-one-read-and-stack.html#cb6-168" aria-hidden="true" tabindex="-1"></a>      <span class="at">no =</span> <span class="fu">ifelse</span>(</span>
<span id="cb6-169"><a href="step-one-read-and-stack.html#cb6-169" aria-hidden="true" tabindex="-1"></a>        <span class="at">test =</span> <span class="fu">str_detect</span>(paxraw_lfe_sas_vs_paxraw_lfe_r<span class="sc">$</span>Differences, <span class="st">&quot;in_dayn&quot;</span>),</span>
<span id="cb6-170"><a href="step-one-read-and-stack.html#cb6-170" aria-hidden="true" tabindex="-1"></a>        <span class="at">yes =</span> <span class="st">&quot;#ffadad&quot;</span>,</span>
<span id="cb6-171"><a href="step-one-read-and-stack.html#cb6-171" aria-hidden="true" tabindex="-1"></a>        <span class="at">no =</span> <span class="st">&quot;#fdffb6&quot;</span></span>
<span id="cb6-172"><a href="step-one-read-and-stack.html#cb6-172" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-173"><a href="step-one-read-and-stack.html#cb6-173" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb6-174"><a href="step-one-read-and-stack.html#cb6-174" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;black&quot;</span></span>
<span id="cb6-175"><a href="step-one-read-and-stack.html#cb6-175" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p><br></p>
<div id="results-1" class="section level4 hasAnchor" number="1.6.2.1">
<h4><span class="header-section-number">1.6.2.1</span> Results<a href="step-one-read-and-stack.html#results-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-16">Table 1.4: </span>Results from the test of equality in step one outputs from the Crossover study (SAS vs. R).
</caption>
<thead>
<tr>
<th style="text-align:left;">
Clinic ID
</th>
<th style="text-align:left;">
Start date
</th>
<th style="text-align:left;">
Differences
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;width: 15%; ">
71011111
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011112
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011113
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011114
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011115
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011116
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 3 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011117
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011118
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011120
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011121
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011122
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011123
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011124
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011125
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011126
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011127
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 57 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011128
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011129
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011130
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011132
</td>
<td style="text-align:left;width: 25%; ">
2021-06-10 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011133
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011134
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011135
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011136
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011137
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011138
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 36 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011139
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 33 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011140
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011141
</td>
<td style="text-align:left;width: 25%; ">
2021-05-28 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011142
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011143
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 17 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011144
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011145
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011150
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011151
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011152
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011153
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011154
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011155
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011156
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011157
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011158
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011159
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011160
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011161
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 8 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011162
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 4 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011163
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011164
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011165
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011166
</td>
<td style="text-align:left;width: 25%; ">
2021-06-01 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011167
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011168
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011169
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011170
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011171
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011172
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 10 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011173
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 17 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011174
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011175
</td>
<td style="text-align:left;width: 25%; ">
2021-05-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011176
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011177
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011178
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011179
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011180
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011181
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 88 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011182
</td>
<td style="text-align:left;width: 25%; ">
2021-06-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 4 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011184
</td>
<td style="text-align:left;width: 25%; ">
2021-05-30 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 21 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011185
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011186
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011187
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011188
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 4 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011189
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011191
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011192
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 12 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011193
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011194
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011195
</td>
<td style="text-align:left;width: 25%; ">
2021-08-27 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011196
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 11 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011197
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 6 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011199
</td>
<td style="text-align:left;width: 25%; ">
2021-09-03 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011203
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011204
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #caffbf !important;">
None
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011205
</td>
<td style="text-align:left;width: 25%; ">
2021-08-26 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 4 in current 0 in target
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011206
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011207
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 7 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011208
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011209
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011210
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011211
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011212
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011213
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011214
</td>
<td style="text-align:left;width: 25%; ">
2022-01-18 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011216
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
71011217
</td>
<td style="text-align:left;width: 25%; ">
2022-01-31 23:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_date”: 1680 string mismatches; Component “in_dow”: 1680 string mismatches; Component “in_hour”: 40320 string mismatches; Component “in_dayn”: 38640 string mismatches; Component “in_noon”: 38640 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011186
</td>
<td style="text-align:left;width: 25%; ">
2021-09-15 00:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #fdffb6 !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 3 in current 0 in target; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011189
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target; Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011206
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011207
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “inclinelying”: ‘is.NA’ value mismatch: 1 in current 0 in target; Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches; Component “actigraph”: 40320 string mismatches
</td>
</tr>
<tr>
<td style="text-align:left;width: 15%; ">
72011208
</td>
<td style="text-align:left;width: 25%; ">
2021-09-18 12:00:00
</td>
<td style="text-align:left;color: black !important;background-color: #ffadad !important;">
Component “in_dayn”: 15120 string mismatches; Component “in_noon”: 20160 string mismatches
</td>
</tr>
</tbody>
</table>
</div>
<div id="interpretation-1" class="section level4 hasAnchor" number="1.6.2.2">
<h4><span class="header-section-number">1.6.2.2</span> Interpretation<a href="step-one-read-and-stack.html#interpretation-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><span style="background: #caffbf;">57.6%</span> of cases in the SAS and R versions of the <i>Step one</i> output (<code>paxraw</code>) are <span style="background: #caffbf;">identical</span>. <span style="background: #fdffb6;">29.3%</span> of cases have <span style="background: #fdffb6;">trivial</span> discrepancies. <span style="background: #ffadad;">13.1%</span> of cases have <span style="background: #ffadad;">non-trivial</span> discrepancies.</p>
<p>The discrepancies are discussed in the <a href="step-one-read-and-stack.html#step-one-issues">Issues section</a>.</p>
</div>
</div>
</div>
<div id="step-one-issues" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Issues<a href="step-one-read-and-stack.html#step-one-issues" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="trivial-discrepancies" class="section level3 hasAnchor" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Trivial discrepancies<a href="step-one-read-and-stack.html#trivial-discrepancies" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="value-mismatches-inclinelying-vector" class="section level4 hasAnchor" number="1.7.1.1">
<h4><span class="header-section-number">1.7.1.1</span> Value mismatches (inclineLying vector)<a href="step-one-read-and-stack.html#value-mismatches-inclinelying-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are a limited number of cases where the SAS version of the <code>paxraw</code> output file renders missing values in the <code>inclineLying</code> vector instead of zero values. The <code>.csv</code> files, which the SAS code imports, do not appear to contain any corresponding missing values in this vector.</p>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-18"></span>
<img src="img/inclineLying-value-is-incorrect.jpg" alt="An example of an element in the inclineLying vector of the SAS version of the paxraw output file that should have a value of zero." width="100%" />
<p class="caption">
Figure 1.2: An example of an element in the inclineLying vector of the SAS version of the paxraw output file that should have a value of zero.
</p>
</div>
</div>
<div id="value-mismatches-actigraph-vector" class="section level4 hasAnchor" number="1.7.1.2">
<h4><span class="header-section-number">1.7.1.2</span> Value mismatches (Actigraph vector)<a href="step-one-read-and-stack.html#value-mismatches-actigraph-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There are a limited number of cases where the SAS version of the <code>paxraw</code> output file renders incorrect values in the <code>Actigraph</code> vector. The errant <code>Actigraph</code> values come from the master log and are most likely manual entry errors.</p>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-19"></span>
<img src="img/Actigraph-value-is-incorrect.jpg" alt="An example of elements in the Actigraph vector of the SAS version of the paxraw output file that should have a value of MOS2E26200424." width="100%" />
<p class="caption">
Figure 1.3: An example of elements in the Actigraph vector of the SAS version of the paxraw output file that should have a value of MOS2E26200424.
</p>
</div>
</div>
</div>
<div id="non-trivial-discrepancies" class="section level3 hasAnchor" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Non-trivial discrepancies<a href="step-one-read-and-stack.html#non-trivial-discrepancies" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="value-mismatches-in_date-vector" class="section level4 hasAnchor" number="1.7.2.1">
<h4><span class="header-section-number">1.7.2.1</span> Value mismatches (in_date vector)<a href="step-one-read-and-stack.html#value-mismatches-in_date-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For cases where accelerometers are initialized at 23:00:00, the SAS version of the <code>paxraw</code> output file treats the data as initialized at midnight of the next day. For example, if the first element (epoch) in the <code>in_date</code> vector has a true value of 2022-01-31 23:00:00, the SAS version of the output will render the value as 2022-02-01 00:00:00. In addition to the ripple effect this has in the <code>in_date</code> vector, inaccurate values appear in other related vectors (e.g., <code>in_dow</code>, <code>in_hour</code>, <code>in_dayn</code>, <code>in_noon</code>) as a consequence.</p>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-20"></span>
<img src="img/comparing-in_date-values.jpg" alt="A comparison of an element in the in_date vector of the SAS (left) and R (right) versions of the paxraw output file where the correct value is 2022-01-31." width="100%" />
<p class="caption">
Figure 1.4: A comparison of an element in the in_date vector of the SAS (left) and R (right) versions of the paxraw output file where the correct value is 2022-01-31.
</p>
</div>
</div>
<div id="value-mismatches-in_dayn-vector" class="section level4 hasAnchor" number="1.7.2.2">
<h4><span class="header-section-number">1.7.2.2</span> Value mismatches (in_dayn vector)<a href="step-one-read-and-stack.html#value-mismatches-in_dayn-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For cases where accelerometers are initialized at 12:00:00, the SAS version of the <code>paxraw</code> output file has instances where two different values in the <code>in_dow</code> vector share the same <code>in_dayn</code> value.</p>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-21"></span>
<img src="img/in_dayn-value-is-incorrect.jpg" alt="An example of an element in the in_dayn vector of the SAS version of the paxraw output file that should have a value of two when the in_dow element values changes to Sunday." width="100%" />
<p class="caption">
Figure 1.5: An example of an element in the in_dayn vector of the SAS version of the paxraw output file that should have a value of two when the in_dow element values changes to Sunday.
</p>
</div>
</div>
<div id="value-mismatches-in_noon-vector" class="section level4 hasAnchor" number="1.7.2.3">
<h4><span class="header-section-number">1.7.2.3</span> Value mismatches (in_noon vector)<a href="step-one-read-and-stack.html#value-mismatches-in_noon-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For cases where accelerometers are initialized at 12:00:00, in the SAS version of the <code>paxraw</code> output file, elements in the <code>in_noon</code> vector increment by one in the last epoch (23:59:45) of the 23:59 measurement sample instead of in the last epoch of the 11:59 measurement sample.</p>
<p><br></p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-22"></span>
<img src="img/in_noon-value-is-incorrect.jpg" alt="An example of an element in the in_noon vector of the SAS version of the paxraw output file that increments by one in the last epoch (23:59:45) of the 23:59 measurement sample." width="100%" />
<p class="caption">
Figure 1.6: An example of an element in the in_noon vector of the SAS version of the paxraw output file that increments by one in the last epoch (23:59:45) of the 23:59 measurement sample.
</p>
</div>
</div>
</div>
<div id="other" class="section level3 hasAnchor" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> Other<a href="step-one-read-and-stack.html#other" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="value-transitions-in_noon-vector" class="section level4 hasAnchor" number="1.7.3.1">
<h4><span class="header-section-number">1.7.3.1</span> Value transitions (in_noon vector)<a href="step-one-read-and-stack.html#value-transitions-in_noon-vector" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Elements in the <code>in_noon</code> vector increment by one in the last epoch (11:59:45) of the 11:59 (am) measurement sample. Is this correct, or should the transition occur in the first epoch (e.g., 11:59:00) of this sample?</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-23"></span>
<img src="img/in_noon-transition-time.jpg" alt="An example of elements in the in_noon vector incremented by one in the last epoch (11:59:45) of the 11:59 (am) measurement sample." width="100%" />
<p class="caption">
Figure 1.7: An example of elements in the in_noon vector incremented by one in the last epoch (11:59:45) of the 11:59 (am) measurement sample.
</p>
</div>
</div>
</div>
</div>
<div id="fixes" class="section level2 hasAnchor" number="1.8">
<h2><span class="header-section-number">1.8</span> Fixes<a href="step-one-read-and-stack.html#fixes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="initialization-times-other-than-midnight" class="section level3 hasAnchor" number="1.8.1">
<h3><span class="header-section-number">1.8.1</span> Initialization times other than midnight<a href="step-one-read-and-stack.html#initialization-times-other-than-midnight" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Related to the <a href="step-one-read-and-stack.html#value-mismatches-in_date-vector">Value mismatches (in_date vector)</a> and <a href="step-one-read-and-stack.html#value-mismatches-in_dayn-vector">Value mismatches (in_dayn vector)</a> sections, accelerometers that are not initialized at midnight will, <em>tentatively</em>, have their first day of (incomplete) data removed. This based on discussions from the Crossover Study bi-weekly meeting (2023-06-29 09:30). The second day of data will serve as the first day, the third day will serve as the second day, …, etc.</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-24"></span>
<img src="img/fix-start_date-if-not-midnight.jpg" alt="Fix applied so that the first day of (incomplete) data is removed if an accelerometer was not initialized at midnight." width="100%" />
<p class="caption">
Figure 1.8: Fix applied so that the first day of (incomplete) data is removed if an accelerometer was not initialized at midnight.
</p>
</div>
</div>
<div id="transition-times-in_noon-vector" class="section level3 hasAnchor" number="1.8.2">
<h3><span class="header-section-number">1.8.2</span> Transition times (in_noon vector)<a href="step-one-read-and-stack.html#transition-times-in_noon-vector" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Related to the <a href="step-one-read-and-stack.html#value-transitions-in_noon-vector">Value transitions (in_noon vector)</a> section, elements in the <code>in_noon</code> vector should increment by one at exactly noon (12:00:00). This based on discussions from the Crossover Study bi-weekly meeting (2023-06-29 09:30).</p>
<div class="figure"><span style="display:block;" id="fig:unnamed-chunk-25"></span>
<img src="img/fix-in_noon-transition-time.jpg" alt="Fix applied so that elements in the in_noon vector increment by one at exactly noon (12:00:00)." width="100%" />
<p class="caption">
Figure 1.9: Fix applied so that elements in the in_noon vector increment by one at exactly noon (12:00:00).
</p>
</div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>During this preliminary data processing, a number of vectors are created for downstream use: <code>in_date</code>, <code>in_dow</code>, <code>in_hour</code>, <code>in_minute</code>, <code>in_second</code>, <code>obsn</code>, <code>grp</code>, <code>in_dayn</code> and <code>in_noon</code>.<a href="step-one-read-and-stack.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Other file types options are available including <code>.csv</code>, <code>.txt</code> and <code>.xlsx</code>. The benefit of the <code>.rds</code> (R Data Serialization) file type includes considerable compression (up to 100x smaller file sizes) and data structure preservation.<a href="step-one-read-and-stack.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
